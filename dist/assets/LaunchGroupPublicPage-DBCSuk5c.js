import{h,u as f,b,c as n,j as e,L as j,a as i}from"./index-Bouv53z1.js";import{r as v,A as u,S as w,a9 as y,z as N}from"./ui-libs-xkhqbQ7p.js";import{P as C}from"./ProductCard-Z14fewl7.js";import"./vendor-qkC6yhPU.js";const A=()=>{const{id:t}=h(),o=f(),{isAuthenticated:L}=b(),[r,d]=v.useState(""),{data:p,isLoading:g}=n({queryKey:["launchGroup",t],queryFn:async()=>{console.log(`[LaunchGroupPublicPage] Fetching products for collection ${t}`);const s=await i.get(`/products/collection/${t}`);return console.log("[LaunchGroupPublicPage] Result:",s),s},retry:!1}),{data:x}=n({queryKey:["productGroupsDetails"],queryFn:()=>i.get("/products/product-groups-details"),staleTime:1e3*60*60}),l=x?.find(s=>s.id===parseInt(t)||s.collection_id===parseInt(t))?.name||"Colección",a=p||[],m=()=>{navigator.share?navigator.share({title:l,url:window.location.href}).catch(console.error):(navigator.clipboard.writeText(window.location.href),N.success("Enlace copiado al portapapeles"))},c=a.filter(s=>s.name.toLowerCase().includes(r.toLowerCase())||s.code.toLowerCase().includes(r.toLowerCase()));return g?e.jsx(j,{}):!a||a.length===0?e.jsxs("div",{className:"p-4 flex flex-col items-center justify-center min-h-[50vh]",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Colección no encontrada o vacía"}),e.jsxs("button",{onClick:()=>o("/products"),className:"text-espint-blue hover:underline flex items-center gap-2",children:[e.jsx(u,{size:16})," Volver a Productos"]})]}):e.jsxs("div",{className:"container mx-auto p-4 max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsx("button",{onClick:()=>o(-1),className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(u,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:l}),e.jsxs("p",{className:"text-sm text-gray-500",children:[a.length," productos"]})]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(w,{className:"w-5 h-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Buscar en esta colección...",className:"bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-espint-blue focus:border-espint-blue block w-full pl-10 p-2.5",value:r,onChange:s=>d(s.target.value)})]}),e.jsx("button",{onClick:m,className:"p-2.5 text-gray-500 bg-white rounded-lg border border-gray-300 hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200",title:"Compartir Colección",children:e.jsx(y,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:c.map(s=>e.jsx(C,{product:s},s.id))}),c.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No se encontraron productos en esta colección con el filtro actual."})]})};export{A as default};
