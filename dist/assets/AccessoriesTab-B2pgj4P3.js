import{a as c,j as e,L as u}from"./index-Bn-_5g9O.js";import{r,a4 as t,o as N,q as A,X as S,S as E}from"./ui-libs-CgXQafC0.js";import"./vendor-qkC6yhPU.js";const R=()=>{const[o,p]=r.useState([]),[d,m]=r.useState(!1),[f,i]=r.useState(!1),[l,h]=r.useState(""),[b,x]=r.useState([]),[j,g]=r.useState(!1);r.useEffect(()=>{n()},[]);const n=async()=>{m(!0);try{const s=await c.getAccessories();p(s)}catch(s){console.error(s),t.error("Error al cargar accesorios")}finally{m(!1)}},y=async s=>{if(s.preventDefault(),!!l.trim()){g(!0);try{const a=await c.fetchProducts(1,l);x(a.products)}catch{t.error("Error al buscar productos")}finally{g(!1)}}},v=async s=>{try{await c.addAccessory(s),t.success("Accesorio agregado"),n(),i(!1)}catch{t.error("Error al agregar accesorio")}},w=async s=>{if(window.confirm("¿Estás seguro de eliminar este accesorio?"))try{await c.removeAccessory(s),t.success("Accesorio eliminado"),n()}catch{t.error("Error al eliminar accesorio")}};return d&&o.length===0?e.jsx(u,{}):e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>{i(!0),x([]),h("")},className:"bg-espint-green text-white px-4 py-2 rounded mb-4 flex items-center gap-2 hover:bg-green-600 transition",children:[e.jsx(N,{size:20})," Agregar Accesorio"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[o.map(s=>e.jsxs("div",{className:"relative aspect-square bg-gray-800 rounded shadow overflow-hidden group",children:[e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover opacity-70 group-hover:opacity-50 transition-opacity"}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-2 pointer-events-none",children:[e.jsx("h3",{className:"font-bold text-white text-center text-sm md:text-base leading-tight drop-shadow-md",children:s.name}),e.jsx("p",{className:"text-gray-200 text-xs mt-1 drop-shadow-md",children:s.code})]}),e.jsx("button",{onClick:()=>w(s.id),className:"absolute bottom-2 right-2 bg-red-500 text-white p-1.5 rounded opacity-100 md:opacity-0 group-hover:opacity-100 transition shadow-lg z-10",title:"Eliminar",children:e.jsx(A,{size:16})})]},s.id)),o.length===0&&!d&&e.jsx("p",{className:"text-gray-500",children:"No hay accesorios configurados."})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Agregar Producto"}),e.jsx("button",{onClick:()=>i(!1),children:e.jsx(S,{size:24})})]}),e.jsxs("form",{onSubmit:y,className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",placeholder:"Buscar por nombre o código...",className:"flex-1 border p-2 rounded",value:l,onChange:s=>h(s.target.value)}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:e.jsx(E,{size:20})})]}),j&&e.jsx(u,{}),e.jsx("div",{className:"space-y-2",children:b.map(s=>e.jsxs("div",{className:"flex justify-between items-center border p-2 rounded hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.imageUrl&&e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-12 h-12 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.code})]})]}),e.jsx("button",{onClick:()=>v(s.id),className:"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600",children:"Agregar"})]},s.id))})]})})]})};export{R as default};
