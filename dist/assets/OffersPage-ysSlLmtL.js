import{b as m,u as l,e as x,j as e,T as i,a as g}from"./index-BjNwQFYG.js";import{A as h}from"./arrow-left-DHf2k2xN.js";const u=()=>e.jsxs("div",{className:"animate-pulse grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-gray-200 h-48 rounded-lg"}),e.jsx("div",{className:"bg-gray-200 h-48 rounded-lg"}),e.jsx("div",{className:"bg-gray-200 h-48 rounded-lg"})]}),f=({message:s})=>e.jsxs("div",{className:"flex flex-col items-center justify-center p-10 bg-white rounded-lg shadow-md",children:[e.jsx("p",{className:"text-red-500 font-semibold text-lg",children:"Error al cargar las ofertas"}),e.jsx("p",{className:"text-gray-600 mt-2",children:s})]}),j=({product:s})=>{const a=l();return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden transform transition-transform hover:scale-105 duration-300 flex flex-col justify-between h-full",children:[s.custom_image_url&&e.jsx("div",{className:"h-48 w-full overflow-hidden",children:e.jsx("img",{src:s.custom_image_url,alt:s.custom_title||s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-6 flex-grow flex flex-col",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded-full uppercase",children:s.brand||"Marca"}),e.jsx(i,{className:"w-6 h-6 text-blue-500"})]}),e.jsx("h3",{className:`text-base font-semibold text-gray-800 mb-2 ${s.custom_description?"":"h-12 overflow-hidden"}`,title:s.custom_title||s.name,children:s.custom_title||s.name}),s.custom_description&&e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-3",children:s.custom_description}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 font-mono",children:s.code}),e.jsx("div",{className:"mt-auto",children:e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.formattedPrice})})]}),e.jsx("div",{className:"p-4 bg-gray-50 mt-auto",children:e.jsx("button",{onClick:()=>a(`/product-detail/${s.id}`),className:"w-full bg-blue-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-600 transition-colors duration-200 cursor-pointer",children:"Ver Detalle"})})]})};function v(){const{user:s}=m(),a=l(),{data:t=[],isLoading:n,isError:o,error:c}=x({queryKey:["offers",s?.id],queryFn:()=>g.fetchOffers(),enabled:!!s?.id,staleTime:1e3*60*5}),d=()=>s?.id?n?e.jsx(u,{}):o?e.jsx(f,{message:c.message}):t.length===0?e.jsxs("div",{className:"text-center py-20 bg-white rounded-lg shadow-md",children:[e.jsx(i,{className:"mx-auto w-16 h-16 text-gray-400"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No hay ofertas disponibles"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Vuelve a consultar más tarde para ver nuevas promociones."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(r=>e.jsx(j,{product:r},r.id))}):e.jsxs("div",{className:"text-center py-20 bg-white rounded-lg shadow-md",children:[e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Inicia sesión para ver las ofertas"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Necesitas estar autenticado para acceder a esta sección."})]});return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("header",{className:"mb-6 flex items-center",children:[e.jsx("button",{onClick:()=>a("/dashboard"),className:"flex items-center justify-center p-2 mr-4 text-gray-600 bg-white rounded-full shadow-md hover:bg-gray-100 transition-colors cursor-pointer","aria-label":"Volver al dashboard",children:e.jsx(h,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Ofertas y Promociones"}),e.jsx("p",{className:"text-gray-600",children:"Descubre los productos con descuentos vigentes que tenemos para ti."})]})]}),d()]})}export{v as default};
