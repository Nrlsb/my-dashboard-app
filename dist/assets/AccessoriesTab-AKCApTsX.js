import{a,j as e,L as y}from"./index-DBWOHFTT.js";import{r,a9 as t,t as T,v as k,X as z,S as M}from"./ui-libs-AVewNoQL.js";import{C as L}from"./ConfirmationModal-CKPmyvqS.js";import"./vendor-qkC6yhPU.js";const q=()=>{const[o,j]=r.useState([]),[x,h]=r.useState(!1),[b,c]=r.useState(!1),[i,u]=r.useState(""),[v,g]=r.useState([]),[w,f]=r.useState(!1),[N,l]=r.useState(!1),[p,n]=r.useState(null);r.useEffect(()=>{d()},[]);const d=async()=>{h(!0);try{const s=await a.getAccessories();j(s)}catch(s){console.error(s),t.error("Error al cargar accesorios")}finally{h(!1)}},A=async s=>{if(s.preventDefault(),!!i.trim()){f(!0);try{const m=await a.fetchProducts(1,i);g(m.products)}catch{t.error("Error al buscar productos")}finally{f(!1)}}},S=async s=>{try{await a.addAccessory(s),t.success("Accesorio agregado"),d(),c(!1)}catch{t.error("Error al agregar accesorio")}},E=s=>{n(s),l(!0)},C=async()=>{if(p){l(!1);try{await a.removeAccessory(p),t.success("Accesorio eliminado"),d()}catch{t.error("Error al eliminar accesorio")}finally{n(null)}}},D=()=>{l(!1),n(null)};return x&&o.length===0?e.jsx(y,{}):e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>{c(!0),g([]),u("")},className:"bg-espint-green text-white px-4 py-2 rounded mb-4 flex items-center gap-2 hover:bg-green-600 transition",children:[e.jsx(T,{size:20})," Agregar Accesorio"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[o.map(s=>e.jsxs("div",{className:"relative aspect-square bg-gray-800 rounded shadow overflow-hidden group",children:[e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover opacity-70 group-hover:opacity-50 transition-opacity"}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-2 pointer-events-none",children:[e.jsx("h3",{className:"font-bold text-white text-center text-sm md:text-base leading-tight drop-shadow-md",children:s.name}),e.jsx("p",{className:"text-gray-200 text-xs mt-1 drop-shadow-md",children:s.code})]}),e.jsx("button",{onClick:()=>E(s.id),className:"absolute bottom-2 right-2 bg-red-500 text-white p-1.5 rounded opacity-100 md:opacity-0 group-hover:opacity-100 transition shadow-lg z-10",title:"Eliminar",children:e.jsx(k,{size:16})})]},s.id)),o.length===0&&!x&&e.jsx("p",{className:"text-gray-500",children:"No hay accesorios configurados."})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Agregar Producto"}),e.jsx("button",{onClick:()=>c(!1),children:e.jsx(z,{size:24})})]}),e.jsxs("form",{onSubmit:A,className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",placeholder:"Buscar por nombre o código...",className:"flex-1 border p-2 rounded",value:i,onChange:s=>u(s.target.value)}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:e.jsx(M,{size:20})})]}),w&&e.jsx(y,{}),e.jsx("div",{className:"space-y-2",children:v.map(s=>e.jsxs("div",{className:"flex justify-between items-center border p-2 rounded hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.imageUrl&&e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-12 h-12 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.code})]})]}),e.jsx("button",{onClick:()=>S(s.id),className:"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600",children:"Agregar"})]},s.id))})]})}),e.jsx(L,{isOpen:N,onClose:D,onConfirm:C,title:"Eliminar Accesorio",message:"¿Estás seguro de eliminar este accesorio?",confirmText:"Eliminar",variant:"danger"})]})};export{q as default};
