import{c as j,R as o,r as x,a as N,j as a,m as w,d as O}from"./index-D-idoHGn.js";import{X as P}from"./x-TyXZf8Gc.js";import{C as z}from"./calendar-DtuQp1Zl.js";const C=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],S=j("eye",C);var y={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},g=o.createContext&&o.createContext(y),E=["attr","size","title"];function L(e,t){if(e==null)return{};var r=V(e,t),s,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function V(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},u.apply(this,arguments)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(s){_(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function _(e,t,r){return t=M(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){var t=T(e,"string");return typeof t=="symbol"?t:t+""}function T(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function v(e){return e&&e.map((t,r)=>o.createElement(t.tag,h({key:r},t.attr),v(t.child)))}function m(e){return t=>o.createElement(A,u({attr:h({},e.attr)},t),v(e.child))}function A(e){var t=r=>{var{attr:s,size:n,title:i}=e,f=L(e,E),d=n||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),o.createElement("svg",u({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,f,{className:c,style:h(h({color:e.color||r.color},r.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&o.createElement("title",null,i),e.children)};return g!==void 0?o.createElement(g.Consumer,null,r=>t(r)):t(y)}function H(e){return m({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(e)}function U(e){return m({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function W(e){return m({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function I(e){return m({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function R(e){return m({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"},child:[]}]})(e)}const k=({isOpen:e,onClose:t,userId:r,userName:s})=>{const[n,i]=x.useState(null),[f,d]=x.useState(!1);x.useEffect(()=>{e&&r&&c()},[e,r]);const c=async()=>{d(!0);try{const l=await N.getTestUserAnalytics(r);i(l.data)}catch(l){console.error("Error fetching stats:",l)}finally{d(!1)}};return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 overflow-hidden",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(w,{className:"w-5 h-5 text-blue-600"}),"Análisis: ",s]}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:a.jsx(P,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"p-6",children:f?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(O,{text:"Cargando datos..."})}):n?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 text-blue-700 mb-1",children:[a.jsx(S,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Visitas Totales"})]}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.totalVisits})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 text-green-700 mb-1",children:[a.jsx(z,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Última Visita"})]}),a.jsx("p",{className:"text-lg font-semibold text-gray-800",children:n.lastVisit?new Date(n.lastVisit).toLocaleDateString():"N/A"}),a.jsx("p",{className:"text-xs text-gray-500",children:n.lastVisit?new Date(n.lastVisit).toLocaleTimeString():""})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:"Páginas Más Vistas"}),n.topPages.length>0?a.jsx("ul",{className:"divide-y divide-gray-100",children:n.topPages.map((l,b)=>a.jsxs("li",{className:"py-2 flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600 truncate max-w-[250px]",title:l.path,children:l.path}),a.jsxs("span",{className:"text-xs font-semibold bg-gray-100 text-gray-600 px-2 py-1 rounded",children:[l.count," visitas"]})]},b))}):a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No hay actividad registrada."})]})]}):a.jsx("p",{className:"text-center text-gray-500",children:"No se pudieron cargar los datos."})}),a.jsx("div",{className:"bg-gray-50 p-4 border-t border-gray-200 flex justify-end",children:a.jsx("button",{onClick:t,className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cerrar"})})]})}):null};export{H as F,k as T,R as a,I as b,W as c,U as d};
