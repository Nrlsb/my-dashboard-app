import{b as g,j as e,a as w}from"./index-BmpGRLHv.js";import{r as o,j as m}from"./ui-libs-Bu6C6VT7.js";import"./vendor-qkC6yhPU.js";const N=()=>{const[n,x]=o.useState(""),[l,f]=o.useState(""),[i,s]=o.useState(""),[a,d]=o.useState(""),[c,u]=o.useState(!1),{logout:p}=g(),h=async t=>{if(t.preventDefault(),s(""),d(""),n.length<8){s("La contraseña debe tener al menos 8 caracteres.");return}if(n!==l){s("Las contraseñas no coinciden.");return}u(!0);try{const r=await w.changePassword(n);r.success?(d("Contraseña actualizada con éxito. Serás desconectado para que inicies sesión nuevamente."),setTimeout(()=>{p()},3e3)):s(r.message||"No se pudo actualizar la contraseña.")}catch(r){console.error(r),s(r.message||"Ocurrió un error inesperado.")}finally{u(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 font-sans",children:e.jsxs("div",{className:"w-full max-w-sm p-8 space-y-6 bg-white rounded-lg shadow-xl",children:[e.jsx("div",{className:"text-center flex justify-center",children:e.jsx("img",{src:"/logo.svg",alt:"Espint Logo",className:"h-16 w-auto",width:"103",height:"64"})}),e.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800",children:"Establecer Nueva Contraseña"}),e.jsx("p",{className:"text-sm text-center text-gray-600",children:"Se ha solicitado una actualización de contraseña. Por favor, establece una nueva contraseña para continuar."}),e.jsxs("form",{className:"space-y-6",onSubmit:h,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-password",aname:"block text-sm font-medium text-gray-700",children:"Nueva Contraseña"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(m,{className:"w-5 h-5 text-gray-400"})}),e.jsx("input",{id:"new-password",type:"password",required:!0,className:"w-full px-3 py-2 pl-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",value:n,onChange:t=>x(t.target.value),placeholder:"Mínimo 8 caracteres",disabled:c||a})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirmar Contraseña"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(m,{className:"w-5 h-5 text-gray-400"})}),e.jsx("input",{id:"confirm-password",type:"password",required:!0,className:"w-full px-3 py-2 pl-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",value:l,onChange:t=>f(t.target.value),placeholder:"Repite la contraseña",disabled:c||a})]})]}),i&&e.jsx("p",{className:"text-sm text-center text-red-600",children:i}),a&&e.jsx("p",{className:"text-sm text-center text-green-600",children:a}),e.jsx("button",{type:"submit",className:"w-full px-4 py-2 font-semibold text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:c||a,children:c?"Guardando...":"Guardar Contraseña"})]})]})})};export{N as default};
