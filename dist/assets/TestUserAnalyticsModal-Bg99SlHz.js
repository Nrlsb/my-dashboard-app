import{u as y,a as n,j as e,L as b}from"./index-ZXV4l69V.js";import{r as i,c as d,X as j}from"./ui-libs-xEc9wXfK.js";import{C as p}from"./ClientAnalyticsView-H_8E1LAy.js";const C=({isOpen:a,onClose:r,userId:t,userName:l,isRegularUser:f=!1,isSellerView:o=!1})=>{const[c,m]=i.useState(null),[g,x]=i.useState(!1),u=y();i.useEffect(()=>{a&&t&&h()},[a,t]);const h=async()=>{x(!0);try{let s;o?s=await n.getVendedorClientAnalytics(t):f?s=await n.getUserAnalytics(t):s=await n.getTestUserAnalytics(t),m(s.data)}catch(s){console.error("Error fetching stats:",s)}finally{x(!1)}};return a?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 flex-shrink-0",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(d,{className:"w-5 h-5 text-blue-600"}),"Análisis: ",l]}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:e.jsx(j,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto",children:g?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(b,{text:"Cargando datos..."})}):c?e.jsx(p,{stats:c,clientName:l}):e.jsx("p",{className:"text-center text-gray-500",children:"No se pudieron cargar los datos."})}),e.jsxs("div",{className:"bg-gray-50 p-4 border-t border-gray-200 flex justify-between items-center",children:[o&&e.jsxs("button",{onClick:()=>{r(),u(`/vendedor-client-analytics/${t}?name=${encodeURIComponent(l)}`)},className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center gap-1",children:["Ver análisis completo ",e.jsx(d,{className:"w-4 h-4"})]}),e.jsx("button",{onClick:r,className:"ml-auto px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cerrar"})]})]})}):null};export{C as T};
