import{a as c,j as e,L as u}from"./index-BusU-Tbk.js";import{r,c as f,X as p,a7 as j,v as y}from"./ui-libs-B_T7o9er.js";const N={"/dashboard":"Inicio","/login":"Iniciar Sesión","/new-order":"Nuevo Pedido","/price-list":"Lista de Precios","/products":"Productos","/cart":"Carrito","/orders":"Mis Pedidos","/profile":"Mi Perfil","/admin/dashboard":"Panel Admin","/admin/users":"Gestión Usuarios","/admin/products":"Gestión Productos"},w=({isOpen:i,onClose:l,userId:a,userName:d,isRegularUser:o=!1})=>{const[s,x]=r.useState(null),[m,n]=r.useState(!1);r.useEffect(()=>{i&&a&&g()},[i,a]);const g=async()=>{n(!0);try{const t=o?await c.getUserAnalytics(a):await c.getTestUserAnalytics(a);x(t.data)}catch(t){console.error("Error fetching stats:",t)}finally{n(!1)}};return i?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(f,{className:"w-5 h-5 text-blue-600"}),"Análisis: ",d]}),e.jsx("button",{onClick:l,className:"text-gray-500 hover:text-gray-700",children:e.jsx(p,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6",children:m?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(u,{text:"Cargando datos..."})}):s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 mb-1",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Visitas Totales"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:s.totalVisits})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700 mb-1",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Última Visita"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:s.lastVisit?new Date(s.lastVisit).toLocaleDateString():"N/A"}),e.jsx("p",{className:"text-xs text-gray-500",children:s.lastVisit?new Date(s.lastVisit).toLocaleTimeString():""})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:"Páginas Más Vistas"}),s.topPages.length>0?e.jsx("ul",{className:"divide-y divide-gray-100",children:s.topPages.map((t,h)=>e.jsxs("li",{className:"py-2 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 truncate max-w-[250px]",title:t.path,children:N[t.path]||t.path}),e.jsxs("span",{className:"text-xs font-semibold bg-gray-100 text-gray-600 px-2 py-1 rounded",children:[t.count," visitas"]})]},h))}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No hay actividad registrada."})]})]}):e.jsx("p",{className:"text-center text-gray-500",children:"No se pudieron cargar los datos."})}),e.jsx("div",{className:"bg-gray-50 p-4 border-t border-gray-200 flex justify-end",children:e.jsx("button",{onClick:l,className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cerrar"})})]})}):null};export{w as T};
