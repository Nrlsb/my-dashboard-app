import{j as w,g as $o,b as qo,u as mo,e as Ko,c as Zo,d as Xo,a as qt}from"./index-Djx856Py.js";import{h as F,r as xe,A as Yo,S as Kt,C as Qo,t as go,X as Jo,w as en,y as tn,l as on,a as nn}from"./ui-libs-Cj6zJXYZ.js";import{u as rn}from"./useInfiniteQuery-WwanUaEC.js";import"./vendor-qkC6yhPU.js";const gt=0,Pe=1,$e=2,po=4;function Zt(e){return()=>e}function sn(e){e()}function ln(e,t){return o=>e(t(o))}function Xt(e,t){return()=>e(t)}function an(e,t){return o=>e(t,o)}function Et(e){return e!==void 0}function cn(...e){return()=>{e.map(sn)}}function rt(){}function pt(e,t){return t(e),e}function un(e,t){return t(e)}function J(...e){return e}function K(e,t){return e(Pe,t)}function D(e,t){e(gt,t)}function Nt(e){e($e)}function oe(e){return e(po)}function E(e,t){return K(e,an(t,gt))}function ye(e,t){const o=e(Pe,n=>{o(),t(n)});return o}function Yt(e){let t,o;return n=>r=>{t=r,o&&clearTimeout(o),o=setTimeout(()=>{n(t)},e)}}function xo(e,t){return e===t}function Q(e=xo){let t;return o=>n=>{e(t,n)||(t=n,o(n))}}function L(e){return t=>o=>{e(o)&&t(o)}}function y(e){return t=>ln(t,e)}function je(e){return t=>()=>{t(e)}}function h(e,...t){const o=dn(...t);return((n,r)=>{switch(n){case $e:Nt(e);return;case Pe:return K(e,o(r))}})}function Be(e,t){return o=>n=>{o(t=e(t,n))}}function Ae(e){return t=>o=>{e>0?e--:t(o)}}function Ee(e){let t=null,o;return n=>r=>{t=r,!o&&(o=setTimeout(()=>{o=void 0,n(t)},e))}}function V(...e){const t=new Array(e.length);let o=0,n=null;const r=Math.pow(2,e.length)-1;return e.forEach((s,l)=>{const a=Math.pow(2,l);K(s,c=>{const u=o;o=o|a,t[l]=c,u!==r&&o===r&&n&&(n(),n=null)})}),s=>l=>{const a=()=>{s([l].concat(t))};o===r?a():n=a}}function dn(...e){return t=>e.reduceRight(un,t)}function fn(e){let t,o;const n=()=>t?.();return function(r,s){switch(r){case Pe:return s?o===s?void 0:(n(),o=s,t=K(e,s),t):(n(),rt);case $e:n(),o=null;return}}}function v(e){let t=e;const o=U();return((n,r)=>{switch(n){case gt:t=r;break;case Pe:{r(t);break}case po:return t}return o(n,r)})}function he(e,t){return pt(v(t),o=>E(e,o))}function U(){const e=[];return((t,o)=>{switch(t){case gt:e.slice().forEach(n=>{n(o)});return;case $e:e.splice(0,e.length);return;case Pe:return e.push(o),()=>{const n=e.indexOf(o);n>-1&&e.splice(n,1)}}})}function we(e){return pt(U(),t=>E(e,t))}function _(e,t=[],{singleton:o}={singleton:!0}){return{constructor:e,dependencies:t,id:hn(),singleton:o}}const hn=()=>Symbol();function mn(e){const t=new Map,o=({constructor:n,dependencies:r,id:s,singleton:l})=>{if(l&&t.has(s))return t.get(s);const a=n(r.map(c=>o(c)));return l&&t.set(s,a),a};return o(e)}function le(...e){const t=U(),o=new Array(e.length);let n=0;const r=Math.pow(2,e.length)-1;return e.forEach((s,l)=>{const a=Math.pow(2,l);K(s,c=>{o[l]=c,n=n|a,n===r&&D(t,o)})}),function(s,l){switch(s){case $e:{Nt(t);return}case Pe:return n===r&&l(o),K(t,l)}}}function P(e,t=xo){return h(e,Q(t))}function yt(...e){return function(t,o){switch(t){case $e:return;case Pe:return cn(...e.map(n=>K(n,o)))}}}var Se=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(Se||{});const gn={0:"debug",3:"error",1:"log",2:"warn"},pn=()=>typeof globalThis>"u"?window:globalThis,Le=_(()=>{const e=v(3);return{log:v((t,o,n=1)=>{var r;const s=(r=pn().VIRTUOSO_LOG_LEVEL)!=null?r:oe(e);n>=s&&console[gn[n]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,o)}),logLevel:e}},[],{singleton:!0});function xt(e,t,o){return vo(e,t,o).callbackRef}function vo(e,t,o){const n=F.useRef(null);let r=l=>{};const s=F.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(l=>{requestAnimationFrame(()=>{const c=l[0].target;c.offsetParent!==null&&e(c)})}):null,[e,o]);return r=l=>{l&&t?(s?.observe(l),n.current=l):(n.current&&s?.unobserve(n.current),n.current=null)},{callbackRef:r,ref:n}}function xn(e,t,o){const n=F.useRef(null),r=F.useCallback(c=>{if(!(c!=null&&c.offsetParent))return;const u=c.getBoundingClientRect(),g=u.width;let I,x;if(t){const T=t.getBoundingClientRect(),B=u.top-T.top;x=T.height-Math.max(0,B),I=B+t.scrollTop}else{const T=l.current.ownerDocument.defaultView;x=T.innerHeight-Math.max(0,u.top),I=u.top+T.scrollY}n.current={offsetTop:I,visibleHeight:x,visibleWidth:g},e(n.current)},[e,t]),{callbackRef:s,ref:l}=vo(r,!0,o),a=F.useCallback(()=>{r(l.current)},[r,l]);return F.useEffect(()=>{var c;if(t){t.addEventListener("scroll",a);const u=new ResizeObserver(()=>{requestAnimationFrame(a)});return u.observe(t),()=>{t.removeEventListener("scroll",a),u.unobserve(t)}}else{const u=(c=l.current)==null?void 0:c.ownerDocument.defaultView;return u?.addEventListener("scroll",a),u?.addEventListener("resize",a),()=>{u?.removeEventListener("scroll",a),u?.removeEventListener("resize",a)}}},[a,t,l]),s}const ge=_(()=>{const e=U(),t=U(),o=v(0),n=U(),r=v(0),s=U(),l=U(),a=v(0),c=v(0),u=v(0),g=v(0),I=U(),x=U(),T=v(!1),B=v(!1),j=v(!1);return E(h(e,y(({scrollTop:p})=>p)),t),E(h(e,y(({scrollHeight:p})=>p)),l),E(t,r),{deviation:o,fixedFooterHeight:u,fixedHeaderHeight:c,footerHeight:g,headerHeight:a,horizontalDirection:B,scrollBy:x,scrollContainerState:e,scrollHeight:l,scrollingInProgress:T,scrollTo:I,scrollTop:t,skipAnimationFrameInResizeObserver:j,smoothScrollTargetReached:n,statefulScrollTop:r,viewportHeight:s}},[],{singleton:!0}),Xe={lvl:0};function wo(e,t){const o=e.length;if(o===0)return[];let{index:n,value:r}=t(e[0]);const s=[];for(let l=1;l<o;l++){const{index:a,value:c}=t(e[l]);s.push({end:a-1,start:n,value:r}),n=a,r=c}return s.push({end:1/0,start:n,value:r}),s}function X(e){return e===Xe}function Ye(e,t){if(!X(e))return t===e.k?e.v:t<e.k?Ye(e.l,t):Ye(e.r,t)}function Re(e,t,o="k"){if(X(e))return[-1/0,void 0];if(Number(e[o])===t)return[e.k,e.v];if(Number(e[o])<t){const n=Re(e.r,t,o);return n[0]===-1/0?[e.k,e.v]:n}return Re(e.l,t,o)}function ve(e,t,o){return X(e)?bo(t,o,1):t===e.k?ce(e,{k:t,v:o}):t<e.k?Qt(ce(e,{l:ve(e.l,t,o)})):Qt(ce(e,{r:ve(e.r,t,o)}))}function Ue(){return Xe}function _e(e,t,o){if(X(e))return[];const n=Re(e,t)[0];return vn(zt(e,n,o))}function Rt(e,t){if(X(e))return Xe;const{k:o,l:n,r}=e;if(t===o){if(X(n))return r;if(X(r))return n;{const[s,l]=Io(n);return dt(ce(e,{k:s,l:To(n),v:l}))}}else return t<o?dt(ce(e,{l:Rt(n,t)})):dt(ce(e,{r:Rt(r,t)}))}function We(e){return X(e)?[]:[...We(e.l),{k:e.k,v:e.v},...We(e.r)]}function zt(e,t,o){if(X(e))return[];const{k:n,l:r,r:s,v:l}=e;let a=[];return n>t&&(a=a.concat(zt(r,t,o))),n>=t&&n<=o&&a.push({k:n,v:l}),n<=o&&(a=a.concat(zt(s,t,o))),a}function dt(e){const{l:t,lvl:o,r:n}=e;if(n.lvl>=o-1&&t.lvl>=o-1)return e;if(o>n.lvl+1){if(Tt(t))return So(ce(e,{lvl:o-1}));if(!X(t)&&!X(t.r))return ce(t.r,{l:ce(t,{r:t.r.l}),lvl:o,r:ce(e,{l:t.r.r,lvl:o-1})});throw new Error("Unexpected empty nodes")}else{if(Tt(e))return jt(ce(e,{lvl:o-1}));if(!X(n)&&!X(n.l)){const r=n.l,s=Tt(r)?n.lvl-1:n.lvl;return ce(r,{l:ce(e,{lvl:o-1,r:r.l}),lvl:r.lvl+1,r:jt(ce(n,{l:r.r,lvl:s}))})}else throw new Error("Unexpected empty nodes")}}function ce(e,t){return bo(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function To(e){return X(e.r)?e.l:dt(ce(e,{r:To(e.r)}))}function Tt(e){return X(e)||e.lvl>e.r.lvl}function Io(e){return X(e.r)?[e.k,e.v]:Io(e.r)}function bo(e,t,o,n=Xe,r=Xe){return{k:e,l:n,lvl:o,r,v:t}}function Qt(e){return jt(So(e))}function So(e){const{l:t}=e;return!X(t)&&t.lvl===e.lvl?ce(t,{r:ce(e,{l:t.r})}):e}function jt(e){const{lvl:t,r:o}=e;return!X(o)&&!X(o.r)&&o.lvl===t&&o.r.lvl===t?ce(o,{l:ce(e,{r:o.l}),lvl:t+1}):e}function vn(e){return wo(e,({k:t,v:o})=>({index:t,value:o}))}function Co(e,t){return!!(e&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex)}function Qe(e,t){return!!(e&&e[0]===t[0]&&e[1]===t[1])}const kt=_(()=>({recalcInProgress:v(!1)}),[],{singleton:!0});function yo(e,t,o){return e[ht(e,t,o)]}function ht(e,t,o,n=0){let r=e.length-1;for(;n<=r;){const s=Math.floor((n+r)/2),l=e[s],a=o(l,t);if(a===0)return s;if(a===-1){if(r-n<2)return s-1;r=s-1}else{if(r===n)return s;n=s+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function wn(e,t,o,n){const r=ht(e,t,n),s=ht(e,o,n,r);return e.slice(r,s+1)}function Je(e,t){return Math.round(e.getBoundingClientRect()[t])}function vt(e){return!X(e.groupOffsetTree)}function Ot({index:e},t){return t===e?0:t<e?-1:1}function Tn(){return{groupIndices:[],groupOffsetTree:Ue(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:Ue()}}function In(e,t){let o=X(e)?0:1/0;for(const n of t){const{endIndex:r,size:s,startIndex:l}=n;if(o=Math.min(o,l),X(e)){e=ve(e,0,s);continue}const a=_e(e,l-1,r+1);if(a.some(jn(n)))continue;let c=!1,u=!1;for(const{end:g,start:I,value:x}of a)c?(r>=I||s===x)&&(e=Rt(e,I)):(u=x!==s,c=!0),g>r&&r>=I&&x!==s&&(e=ve(e,r+1,x));u&&(e=ve(e,l,s))}return[e,o]}function bn(e){return typeof e.groupIndex<"u"}function Sn({offset:e},t){return t===e?0:t<e?-1:1}function et(e,t,o){if(t.length===0)return 0;const{index:n,offset:r,size:s}=yo(t,e,Ot),l=e-n,a=s*l+(l-1)*o+r;return a>0?a+o:a}function Ro(e,t){if(!vt(t))return e;let o=0;for(;t.groupIndices[o]<=e+o;)o++;return e+o}function zo(e,t,o){if(bn(e))return t.groupIndices[e.groupIndex]+1;{const n=e.index==="LAST"?o:e.index;let r=Ro(n,t);return r=Math.max(0,r,Math.min(o,r)),r}}function Cn(e,t,o,n=0){return n>0&&(t=Math.max(t,yo(e,n,Ot).offset)),wo(wn(e,t,o,Sn),zn)}function yn(e,[t,o,n,r]){t.length>0&&n("received item sizes",t,Se.DEBUG);const s=e.sizeTree;let l=s,a=0;if(o.length>0&&X(s)&&t.length===2){const x=t[0].size,T=t[1].size;l=o.reduce((B,j)=>ve(ve(B,j,x),j+1,T),l)}else[l,a]=In(l,t);if(l===s)return e;const{lastIndex:c,lastOffset:u,lastSize:g,offsetTree:I}=Bt(e.offsetTree,a,l,r);return{groupIndices:o,groupOffsetTree:o.reduce((x,T)=>ve(x,T,et(T,I,r)),Ue()),lastIndex:c,lastOffset:u,lastSize:g,offsetTree:I,sizeTree:l}}function Rn(e){return We(e).map(({k:t,v:o},n,r)=>{const s=r[n+1];return{endIndex:s?s.k-1:1/0,size:o,startIndex:t}})}function Jt(e,t){let o=0,n=0;for(;o<e;)o+=t[n+1]-t[n]-1,n++;return n-(o===e?0:1)}function Bt(e,t,o,n){let r=e,s=0,l=0,a=0,c=0;if(t!==0){c=ht(r,t-1,Ot),a=r[c].offset;const u=Re(o,t-1);s=u[0],l=u[1],r.length&&r[c].size===Re(o,t)[1]&&(c-=1),r=r.slice(0,c+1)}else r=[];for(const{start:u,value:g}of _e(o,t,1/0)){const I=u-s,x=I*l+a+I*n;r.push({index:u,offset:x,size:g}),s=u,a=x,l=g}return{lastIndex:s,lastOffset:a,lastSize:l,offsetTree:r}}function zn(e){return{index:e.index,value:e}}function jn(e){const{endIndex:t,size:o,startIndex:n}=e;return r=>r.start===n&&(r.end===t||r.end===1/0)&&r.value===o}const Bn={offsetHeight:"height",offsetWidth:"width"},He=_(([{log:e},{recalcInProgress:t}])=>{const o=U(),n=U(),r=he(n,0),s=U(),l=U(),a=v(0),c=v([]),u=v(void 0),g=v(void 0),I=v(void 0),x=v(void 0),T=v((i,m)=>Je(i,Bn[m])),B=v(void 0),j=v(0),p=Tn(),f=he(h(o,V(c,e,j),Be(yn,p),Q()),p),d=he(h(c,Q(),Be((i,m)=>({current:m,prev:i.current}),{current:[],prev:[]}),y(({prev:i})=>i)),[]);E(h(c,L(i=>i.length>0),V(f,j),y(([i,m,S])=>{const R=i.reduce((N,A,M)=>ve(N,A,et(A,m.offsetTree,S)||M),Ue());return{...m,groupIndices:i,groupOffsetTree:R}})),f),E(h(n,V(f),L(([i,{lastIndex:m}])=>i<m),y(([i,{lastIndex:m,lastSize:S}])=>[{endIndex:m,size:S,startIndex:i}])),o),E(u,g);const b=he(h(u,y(i=>i===void 0)),!0);E(h(g,L(i=>i!==void 0&&X(oe(f).sizeTree)),y(i=>{const m=oe(I),S=oe(c).length>0;return m?S?[{endIndex:0,size:m,startIndex:0},{endIndex:1,size:i,startIndex:1}]:[]:[{endIndex:0,size:i,startIndex:0}]})),o),E(h(x,L(i=>i!==void 0&&i.length>0&&X(oe(f).sizeTree)),y(i=>{const m=[];let S=i[0],R=0;for(let N=1;N<i.length;N++){const A=i[N];A!==S&&(m.push({endIndex:N-1,size:S,startIndex:R}),S=A,R=N)}return m.push({endIndex:i.length-1,size:S,startIndex:R}),m})),o),E(h(c,V(I,g),L(([,i,m])=>i!==void 0&&m!==void 0),y(([i,m,S])=>{const R=[];for(let N=0;N<i.length;N++){const A=i[N],M=i[N+1];R.push({startIndex:A,endIndex:A,size:m}),M!==void 0&&R.push({startIndex:A+1,endIndex:M-1,size:S})}return R})),o);const H=we(h(o,V(f),Be(({sizes:i},[m,S])=>({changed:S!==i,sizes:S}),{changed:!1,sizes:p}),y(i=>i.changed)));K(h(a,Be((i,m)=>({diff:i.prev-m,prev:m}),{diff:0,prev:0}),y(i=>i.diff)),i=>{const{groupIndices:m}=oe(f);if(i>0)D(t,!0),D(s,i+Jt(i,m));else if(i<0){const S=oe(d);S.length>0&&(i-=Jt(-i,S)),D(l,i)}}),K(h(a,V(e)),([i,m])=>{i<0&&m("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:a},Se.ERROR)});const z=we(s);E(h(s,V(f),y(([i,m])=>{const S=m.groupIndices.length>0,R=[],N=m.lastSize;if(S){const A=Ye(m.sizeTree,0);let M=0,q=0;for(;M<i;){const k=m.groupIndices[q],W=m.groupIndices.length===q+1?1/0:m.groupIndices[q+1]-k-1;R.push({endIndex:k,size:A,startIndex:k}),R.push({endIndex:k+1+W-1,size:N,startIndex:k+1}),q++,M+=W+1}const G=We(m.sizeTree);return M!==i&&G.shift(),G.reduce((k,{k:W,v:re})=>{let ie=k.ranges;return k.prevSize!==0&&(ie=[...k.ranges,{endIndex:W+i-1,size:k.prevSize,startIndex:k.prevIndex}]),{prevIndex:W+i,prevSize:re,ranges:ie}},{prevIndex:i,prevSize:0,ranges:R}).ranges}return We(m.sizeTree).reduce((A,{k:M,v:q})=>({prevIndex:M+i,prevSize:q,ranges:[...A.ranges,{endIndex:M+i-1,size:A.prevSize,startIndex:A.prevIndex}]}),{prevIndex:0,prevSize:N,ranges:[]}).ranges})),o);const O=we(h(l,V(f,j),y(([i,{offsetTree:m},S])=>{const R=-i;return et(R,m,S)})));return E(h(l,V(f,j),y(([i,m,S])=>{if(m.groupIndices.length>0){if(X(m.sizeTree))return m;let R=Ue();const N=oe(d);let A=0,M=0,q=0;for(;A<-i;){q=N[M];const G=N[M+1]-q-1;M++,A+=G+1}if(R=We(m.sizeTree).reduce((G,{k,v:W})=>ve(G,Math.max(0,k+i),W),R),A!==-i){const G=Ye(m.sizeTree,q);R=ve(R,0,G);const k=Re(m.sizeTree,-i+1)[1];R=ve(R,1,k)}return{...m,sizeTree:R,...Bt(m.offsetTree,0,R,S)}}else{const R=We(m.sizeTree).reduce((N,{k:A,v:M})=>ve(N,Math.max(0,A+i),M),Ue());return{...m,sizeTree:R,...Bt(m.offsetTree,0,R,S)}}})),f),{beforeUnshiftWith:z,data:B,defaultItemSize:g,firstItemIndex:a,fixedItemSize:u,fixedGroupSize:I,gap:j,groupIndices:c,heightEstimates:x,itemSize:T,listRefresh:H,shiftWith:l,shiftWithOffset:O,sizeRanges:o,sizes:f,statefulTotalCount:r,totalCount:n,trackItemSizes:b,unshiftWith:s}},J(Le,kt),{singleton:!0});function Hn(e){return e.reduce((t,o)=>(t.groupIndices.push(t.totalCount),t.totalCount+=o+1,t),{groupIndices:[],totalCount:0})}const jo=_(([{groupIndices:e,sizes:t,totalCount:o},{headerHeight:n,scrollTop:r}])=>{const s=U(),l=U(),a=we(h(s,y(Hn)));return E(h(a,y(c=>c.totalCount)),o),E(h(a,y(c=>c.groupIndices)),e),E(h(le(r,t,n),L(([c,u])=>vt(u)),y(([c,u,g])=>Re(u.groupOffsetTree,Math.max(c-g,0),"v")[0]),Q(),y(c=>[c])),l),{groupCounts:s,topItemsIndexes:l}},J(He,ge)),Fe=_(([{log:e}])=>{const t=v(!1),o=we(h(t,L(n=>n),Q()));return K(t,n=>{n&&oe(e)("props updated",{},Se.DEBUG)}),{didMount:o,propsReady:t}},J(Le),{singleton:!0}),En=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function Bo(e){const t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),(!t.behavior||!En)&&(t.behavior="auto"),t.offset||(t.offset=0),t}const st=_(([{gap:e,listRefresh:t,sizes:o,totalCount:n},{fixedFooterHeight:r,fixedHeaderHeight:s,footerHeight:l,headerHeight:a,scrollingInProgress:c,scrollTo:u,smoothScrollTargetReached:g,viewportHeight:I},{log:x}])=>{const T=U(),B=U(),j=v(0);let p=null,f=null,d=null;function b(){p&&(p(),p=null),d&&(d(),d=null),f&&(clearTimeout(f),f=null),D(c,!1)}return E(h(T,V(o,I,n,j,a,l,x),V(e,s,r),y(([[H,z,O,i,m,S,R,N],A,M,q])=>{const G=Bo(H),{align:k,behavior:W,offset:re}=G,ie=i-1,me=zo(G,z,ie);let pe=et(me,z.offsetTree,A)+S;k==="end"?(pe+=M+Re(z.sizeTree,me)[1]-O+q,me===ie&&(pe+=R)):k==="center"?pe+=(M+Re(z.sizeTree,me)[1]-O+q)/2:pe-=m,re&&(pe+=re);const ze=Ce=>{b(),Ce?(N("retrying to scroll to",{location:H},Se.DEBUG),D(T,H)):(D(B,!0),N("list did not change, scroll successful",{},Se.DEBUG))};if(b(),W==="smooth"){let Ce=!1;d=K(t,Ne=>{Ce=Ce||Ne}),p=ye(g,()=>{ze(Ce)})}else p=ye(h(t,Nn(150)),ze);return f=setTimeout(()=>{b()},1200),D(c,!0),N("scrolling from index to",{behavior:W,index:me,top:pe},Se.DEBUG),{behavior:W,top:pe}})),u),{scrollTargetReached:B,scrollToIndex:T,topListHeight:j}},J(He,ge,Le),{singleton:!0});function Nn(e){return t=>{const o=setTimeout(()=>{t(!1)},e);return n=>{n&&(t(!0),clearTimeout(o))}}}function Pt(e,t){e==0?t():requestAnimationFrame(()=>{Pt(e-1,t)})}function Lt(e,t){const o=t-1;return typeof e=="number"?e:e.index==="LAST"?o:e.index}const lt=_(([{defaultItemSize:e,listRefresh:t,sizes:o},{scrollTop:n},{scrollTargetReached:r,scrollToIndex:s},{didMount:l}])=>{const a=v(!0),c=v(0),u=v(!0);return E(h(l,V(c),L(([g,I])=>!!I),je(!1)),a),E(h(l,V(c),L(([g,I])=>!!I),je(!1)),u),K(h(le(t,l),V(a,o,e,u),L(([[,g],I,{sizeTree:x},T,B])=>g&&(!X(x)||Et(T))&&!I&&!B),V(c)),([,g])=>{ye(r,()=>{D(u,!0)}),Pt(4,()=>{ye(n,()=>{D(a,!0)}),D(s,g)})}),{initialItemFinalLocationReached:u,initialTopMostItemIndex:c,scrolledToInitialItem:a}},J(He,ge,st,Fe),{singleton:!0});function Ho(e,t){return Math.abs(e-t)<1.01}const tt="up",Ke="down",kn="none",On={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},Pn=0,it=_(([{footerHeight:e,headerHeight:t,scrollBy:o,scrollContainerState:n,scrollTop:r,viewportHeight:s}])=>{const l=v(!1),a=v(!0),c=U(),u=U(),g=v(4),I=v(Pn),x=he(h(yt(h(P(r),Ae(1),je(!0)),h(P(r),Ae(1),je(!1),Yt(100))),Q()),!1),T=he(h(yt(h(o,je(!0)),h(o,je(!1),Yt(200))),Q()),!1);E(h(le(P(r),P(I)),y(([d,b])=>d<=b),Q()),a),E(h(a,Ee(50)),u);const B=we(h(le(n,P(s),P(t),P(e),P(g)),Be((d,[{scrollHeight:b,scrollTop:H},z,O,i,m])=>{const S=H+z-b>-m,R={scrollHeight:b,scrollTop:H,viewportHeight:z};if(S){let A,M;return H>d.state.scrollTop?(A="SCROLLED_DOWN",M=d.state.scrollTop-H):(A="SIZE_DECREASED",M=d.state.scrollTop-H||d.scrollTopDelta),{atBottom:!0,atBottomBecause:A,scrollTopDelta:M,state:R}}let N;return R.scrollHeight>d.state.scrollHeight?N="SIZE_INCREASED":z<d.state.viewportHeight?N="VIEWPORT_HEIGHT_DECREASING":H<d.state.scrollTop?N="SCROLLING_UPWARDS":N="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:N,state:R}},On),Q((d,b)=>d&&d.atBottom===b.atBottom))),j=he(h(n,Be((d,{scrollHeight:b,scrollTop:H,viewportHeight:z})=>{if(Ho(d.scrollHeight,b))return{changed:!1,jump:0,scrollHeight:b,scrollTop:H};{const O=b-(H+z)<1;return d.scrollTop!==H&&O?{changed:!0,jump:d.scrollTop-H,scrollHeight:b,scrollTop:H}:{changed:!0,jump:0,scrollHeight:b,scrollTop:H}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),L(d=>d.changed),y(d=>d.jump)),0);E(h(B,y(d=>d.atBottom)),l),E(h(l,Ee(50)),c);const p=v(Ke);E(h(n,y(({scrollTop:d})=>d),Q(),Be((d,b)=>oe(T)?{direction:d.direction,prevScrollTop:b}:{direction:b<d.prevScrollTop?tt:Ke,prevScrollTop:b},{direction:Ke,prevScrollTop:0}),y(d=>d.direction)),p),E(h(n,Ee(50),je(kn)),p);const f=v(0);return E(h(x,L(d=>!d),je(0)),f),E(h(r,Ee(100),V(x),L(([d,b])=>b),Be(([d,b],[H])=>[b,H],[0,0]),y(([d,b])=>b-d)),f),{atBottomState:B,atBottomStateChange:c,atBottomThreshold:g,atTopStateChange:u,atTopThreshold:I,isAtBottom:l,isAtTop:a,isScrolling:x,lastJumpDueToItemResize:j,scrollDirection:p,scrollVelocity:f}},J(ge)),ot="top",nt="bottom",eo="none";function to(e,t,o){return typeof e=="number"?o===tt&&t===ot||o===Ke&&t===nt?e:0:o===tt?t===ot?e.main:e.reverse:t===nt?e.main:e.reverse}function oo(e,t){var o;return typeof e=="number"?e:(o=e[t])!=null?o:0}const Ft=_(([{deviation:e,fixedHeaderHeight:t,headerHeight:o,scrollTop:n,viewportHeight:r}])=>{const s=U(),l=v(0),a=v(0),c=v(0),u=he(h(le(P(n),P(r),P(o),P(s,Qe),P(c),P(l),P(t),P(e),P(a)),y(([g,I,x,[T,B],j,p,f,d,b])=>{const H=g-d,z=p+f,O=Math.max(x-H,0);let i=eo;const m=oo(b,ot),S=oo(b,nt);return T-=d,T+=x+f,B+=x+f,B-=d,T>g+z-m&&(i=tt),B<g-O+I+S&&(i=Ke),i!==eo?[Math.max(H-x-to(j,ot,i)-m,0),H-O-f+I+to(j,nt,i)+S]:null}),L(g=>g!=null),Q(Qe)),[0,0]);return{increaseViewportBy:a,listBoundary:s,overscan:c,topListHeight:l,visibleRange:u}},J(ge),{singleton:!0});function Ln(e,t,o){if(vt(t)){const n=Ro(e,t);return[{index:Re(t.groupOffsetTree,n)[0],offset:0,size:0},{data:o?.[0],index:n,offset:0,size:0}]}return[{data:o?.[0],index:e,offset:0,size:0}]}const It={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function ft(e,t,o,n,r,s){const{lastIndex:l,lastOffset:a,lastSize:c}=r;let u=0,g=0;if(e.length>0){u=e[0].offset;const j=e[e.length-1];g=j.offset+j.size}const I=o-l,x=a+I*c+(I-1)*n,T=u,B=x-g;return{bottom:g,firstItemIndex:s,items:no(e,r,s),offsetBottom:B,offsetTop:u,top:T,topItems:no(t,r,s),topListHeight:t.reduce((j,p)=>p.size+j,0),totalCount:o}}function Eo(e,t,o,n,r,s){let l=0;if(o.groupIndices.length>0)for(const g of o.groupIndices){if(g-l>=e)break;l++}const a=e+l,c=Lt(t,a),u=Array.from({length:a}).map((g,I)=>({data:s[I+c],index:I+c,offset:0,size:0}));return ft(u,[],a,r,o,n)}function no(e,t,o){if(e.length===0)return[];if(!vt(t))return e.map(u=>({...u,index:u.index+o,originalIndex:u.index}));const n=e[0].index,r=e[e.length-1].index,s=[],l=_e(t.groupOffsetTree,n,r);let a,c=0;for(const u of e){(!a||a.end<u.index)&&(a=l.shift(),c=t.groupIndices.indexOf(a.start));let g;u.index===a.start?g={index:c,type:"group"}:g={groupIndex:c,index:u.index-(c+1)+o},s.push({...g,data:u.data,offset:u.offset,originalIndex:u.index,size:u.size})}return s}function ro(e,t){var o;return e===void 0?0:typeof e=="number"?e:(o=e[t])!=null?o:0}const De=_(([{data:e,firstItemIndex:t,gap:o,sizes:n,totalCount:r},s,{listBoundary:l,topListHeight:a,visibleRange:c},{initialTopMostItemIndex:u,scrolledToInitialItem:g},{topListHeight:I},x,{didMount:T},{recalcInProgress:B}])=>{const j=v([]),p=v(0),f=U(),d=v(0);E(s.topItemsIndexes,j);const b=he(h(le(T,B,P(c,Qe),P(r),P(n),P(u),g,P(j),P(t),P(o),P(d),e),L(([i,m,,S,,,,,,,,R])=>{const N=R&&R.length!==S;return i&&!m&&!N}),y(([,,[i,m],S,R,N,A,M,q,G,k,W])=>{var re,ie,me,pe;const ze=R,{offsetTree:Ce,sizeTree:Ne}=ze,qe=oe(p);if(S===0)return{...It,totalCount:S};if(i===0&&m===0)return qe===0?{...It,totalCount:S}:Eo(qe,N,R,q,G,W||[]);if(X(Ne))return qe>0?null:ft(Ln(Lt(N,S),ze,W),[],S,G,ze,q);const Ve=[];if(M.length>0){const ae=M[0],ne=M[M.length-1];let ue=0;for(const se of _e(Ne,ae,ne)){const Z=se.value,Y=Math.max(se.start,ae),Ie=Math.min(se.end,ne);for(let fe=Y;fe<=Ie;fe++)Ve.push({data:W?.[fe],index:fe,offset:ue,size:Z}),ue+=Z}}if(!A)return ft([],Ve,S,G,ze,q);const ke=M.length>0?M[M.length-1]+1:0,C=Cn(Ce,i,m,ke);if(C.length===0)return null;const $=S-1,ee=pt([],ae=>{for(const ne of C){const ue=ne.value;let se=ue.offset,Z=ne.start;const Y=ue.size;if(ue.offset<i){Z+=Math.floor((i-ue.offset+G)/(Y+G));const fe=Z-ne.start;se+=fe*Y+fe*G}Z<ke&&(se+=(ke-Z)*Y,Z=ke);const Ie=Math.min(ne.end,$);for(let fe=Z;fe<=Ie&&!(se>=m);fe++)ae.push({data:W?.[fe],index:fe,offset:se,size:Y}),se+=Y+G}}),de=ro(k,ot),Te=ro(k,nt);if(ee.length>0&&(de>0||Te>0)){const ae=ee[0],ne=ee[ee.length-1];if(de>0&&ae.index>ke){const ue=Math.min(de,ae.index-ke),se=[];let Z=ae.offset;for(let Y=ae.index-1;Y>=ae.index-ue;Y--){const Ie=(ie=(re=_e(Ne,Y,Y)[0])==null?void 0:re.value)!=null?ie:ae.size;Z-=Ie+G,se.unshift({data:W?.[Y],index:Y,offset:Z,size:Ie})}ee.unshift(...se)}if(Te>0&&ne.index<$){const ue=Math.min(Te,$-ne.index);let se=ne.offset+ne.size+G;for(let Z=ne.index+1;Z<=ne.index+ue;Z++){const Y=(pe=(me=_e(Ne,Z,Z)[0])==null?void 0:me.value)!=null?pe:ne.size;ee.push({data:W?.[Z],index:Z,offset:se,size:Y}),se+=Y+G}}}return ft(ee,Ve,S,G,ze,q)}),L(i=>i!==null),Q()),It);E(h(e,L(Et),y(i=>i?.length)),r),E(h(b,y(i=>i.topListHeight)),I),E(I,a),E(h(b,y(i=>[i.top,i.bottom])),l),E(h(b,y(i=>i.items)),f);const H=we(h(b,L(({items:i})=>i.length>0),V(r,e),L(([{items:i},m])=>i[i.length-1].originalIndex===m-1),y(([,i,m])=>[i-1,m]),Q(Qe),y(([i])=>i))),z=we(h(b,Ee(200),L(({items:i,topItems:m})=>i.length>0&&i[0].originalIndex===m.length),y(({items:i})=>i[0].index),Q())),O=we(h(b,L(({items:i})=>i.length>0),y(({items:i})=>{let m=0,S=i.length-1;for(;i[m].type==="group"&&m<S;)m++;for(;i[S].type==="group"&&S>m;)S--;return{endIndex:i[S].index,startIndex:i[m].index}}),Q(Co)));return{endReached:H,initialItemCount:p,itemsRendered:f,listState:b,minOverscanItemCount:d,rangeChanged:O,startReached:z,topItemsIndexes:j,...x}},J(He,jo,Ft,lt,st,it,Fe,kt),{singleton:!0}),No=_(([{fixedFooterHeight:e,fixedHeaderHeight:t,footerHeight:o,headerHeight:n},{listState:r}])=>{const s=U(),l=he(h(le(o,e,n,t,r),y(([a,c,u,g,I])=>a+c+u+g+I.offsetBottom+I.bottom)),0);return E(P(l),s),{totalListHeight:l,totalListHeightChanged:s}},J(ge,De),{singleton:!0}),Fn=_(([{viewportHeight:e},{totalListHeight:t}])=>{const o=v(!1),n=he(h(le(o,e,t),L(([r])=>r),y(([,r,s])=>Math.max(0,r-s)),Ee(0),Q()),0);return{alignToBottom:o,paddingTopAddition:n}},J(ge,No),{singleton:!0}),ko=_(()=>({context:v(null)})),Mn=({itemBottom:e,itemTop:t,locationParams:{align:o,behavior:n,...r},viewportBottom:s,viewportTop:l})=>t<l?{...r,align:o??"start",behavior:n}:e>s?{...r,align:o??"end",behavior:n}:null,Oo=_(([{gap:e,sizes:t,totalCount:o},{fixedFooterHeight:n,fixedHeaderHeight:r,headerHeight:s,scrollingInProgress:l,scrollTop:a,viewportHeight:c},{scrollToIndex:u}])=>{const g=U();return E(h(g,V(t,c,o,s,r,n,a),V(e),y(([[I,x,T,B,j,p,f,d],b])=>{const{align:H,behavior:z,calculateViewLocation:O=Mn,done:i,...m}=I,S=zo(I,x,B-1),R=et(S,x.offsetTree,b)+j+p,N=R+Re(x.sizeTree,S)[1],A=d+p,M=d+T-f,q=O({itemBottom:N,itemTop:R,locationParams:{align:H,behavior:z,...m},viewportBottom:M,viewportTop:A});return q?i&&ye(h(l,L(G=>!G),Ae(oe(l)?1:2)),i):i?.(),q}),L(I=>I!==null)),u),{scrollIntoView:g}},J(He,ge,st,De,Le),{singleton:!0});function so(e){return e?e==="smooth"?"smooth":"auto":!1}const Wn=(e,t)=>typeof e=="function"?so(e(t)):t&&so(e),An=_(([{listRefresh:e,totalCount:t,fixedItemSize:o,data:n},{atBottomState:r,isAtBottom:s},{scrollToIndex:l},{scrolledToInitialItem:a},{didMount:c,propsReady:u},{log:g},{scrollingInProgress:I},{context:x},{scrollIntoView:T}])=>{const B=v(!1),j=U();let p=null;function f(z){D(l,{align:"end",behavior:z,index:"LAST"})}K(h(le(h(P(t),Ae(1)),c),V(P(B),s,a,I),y(([[z,O],i,m,S,R])=>{let N=O&&S,A="auto";return N&&(A=Wn(i,m||R),N=N&&!!A),{followOutputBehavior:A,shouldFollow:N,totalCount:z}}),L(({shouldFollow:z})=>z)),({followOutputBehavior:z,totalCount:O})=>{p&&(p(),p=null),oe(o)?requestAnimationFrame(()=>{oe(g)("following output to ",{totalCount:O},Se.DEBUG),f(z)}):p=ye(e,()=>{oe(g)("following output to ",{totalCount:O},Se.DEBUG),f(z),p=null})});function d(z){const O=ye(r,i=>{z&&!i.atBottom&&i.notAtBottomBecause==="SIZE_INCREASED"&&!p&&(oe(g)("scrolling to bottom due to increased size",{},Se.DEBUG),f("auto"))});setTimeout(O,100)}K(h(le(P(B),t,u),L(([z,,O])=>z&&O),Be(({value:z},[,O])=>({refreshed:z===O,value:O}),{refreshed:!1,value:0}),L(({refreshed:z})=>z),V(B,t)),([,z])=>{oe(a)&&d(z!==!1)}),K(j,()=>{d(oe(B)!==!1)}),K(le(P(B),r),([z,O])=>{z&&!O.atBottom&&O.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&f("auto")});const b=v(null),H=U();return E(yt(h(P(n),y(z=>{var O;return(O=z?.length)!=null?O:0})),h(P(t))),H),K(h(le(h(H,Ae(1)),c),V(P(b),a,I,x),y(([[z,O],i,m,S,R])=>O&&m&&i?.({context:R,totalCount:z,scrollingInProgress:S})),L(z=>!!z),Ee(0)),z=>{p&&(p(),p=null),oe(o)?requestAnimationFrame(()=>{oe(g)("scrolling into view",{}),D(T,z)}):p=ye(e,()=>{oe(g)("scrolling into view",{}),D(T,z),p=null})}),{autoscrollToBottom:j,followOutput:B,scrollIntoViewOnChange:b}},J(He,it,st,lt,Fe,Le,ge,ko,Oo)),Dn=_(([{data:e,firstItemIndex:t,gap:o,sizes:n},{initialTopMostItemIndex:r},{initialItemCount:s,listState:l},{didMount:a}])=>(E(h(a,V(s),L(([,c])=>c!==0),V(r,n,t,o,e),y(([[,c],u,g,I,x,T=[]])=>Eo(c,u,g,I,x,T))),l),{}),J(He,lt,De,Fe),{singleton:!0}),Vn=_(([{didMount:e},{scrollTo:t},{listState:o}])=>{const n=v(0);return K(h(e,V(n),L(([,r])=>r!==0),y(([,r])=>({top:r}))),r=>{ye(h(o,Ae(1),L(s=>s.items.length>1)),()=>{requestAnimationFrame(()=>{D(t,r)})})}),{initialScrollTop:n}},J(Fe,ge,De),{singleton:!0}),Po=_(([{scrollVelocity:e}])=>{const t=v(!1),o=U(),n=v(!1);return E(h(e,V(n,t,o),L(([r,s])=>!!s),y(([r,s,l,a])=>{const{enter:c,exit:u}=s;if(l){if(u(r,a))return!1}else if(c(r,a))return!0;return l}),Q()),t),K(h(le(t,e,o),V(n)),([[r,s,l],a])=>{r&&a&&a.change&&a.change(s,l)}),{isSeeking:t,scrollSeekConfiguration:n,scrollSeekRangeChanged:o,scrollVelocity:e}},J(it),{singleton:!0}),Mt=_(([{scrollContainerState:e,scrollTo:t}])=>{const o=U(),n=U(),r=U(),s=v(!1),l=v(void 0);return E(h(le(o,n),y(([{scrollHeight:a,scrollTop:c,viewportHeight:u},{offsetTop:g}])=>({scrollHeight:a,scrollTop:Math.max(0,c-g),viewportHeight:u}))),e),E(h(t,V(n),y(([a,{offsetTop:c}])=>({...a,top:a.top+c}))),r),{customScrollParent:l,useWindowScroll:s,windowScrollContainerState:o,windowScrollTo:r,windowViewportRect:n}},J(ge)),Gn=_(([{sizeRanges:e,sizes:t},{headerHeight:o,scrollTop:n},{initialTopMostItemIndex:r},{didMount:s},{useWindowScroll:l,windowScrollContainerState:a,windowViewportRect:c}])=>{const u=U(),g=v(void 0),I=v(null),x=v(null);return E(a,I),E(c,x),K(h(u,V(t,n,l,I,x,o)),([T,B,j,p,f,d,b])=>{const H=Rn(B.sizeTree);p&&f!==null&&d!==null&&(j=f.scrollTop-d.offsetTop),j-=b,T({ranges:H,scrollTop:j})}),E(h(g,L(Et),y(Un)),r),E(h(s,V(g),L(([,T])=>T!==void 0),Q(),y(([,T])=>T.ranges)),e),{getState:u,restoreStateFrom:g}},J(He,ge,lt,Fe,Mt));function Un(e){return{align:"start",index:0,offset:e.scrollTop}}const _n=_(([{topItemsIndexes:e}])=>{const t=v(0);return E(h(t,L(o=>o>=0),y(o=>Array.from({length:o}).map((n,r)=>r))),e),{topItemCount:t}},J(De));function Lo(e){let t=!1,o;return(()=>(t||(t=!0,o=e()),o))}const $n=Lo(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),qn=_(([{deviation:e,scrollBy:t,scrollingInProgress:o,scrollTop:n},{isAtBottom:r,isScrolling:s,lastJumpDueToItemResize:l,scrollDirection:a},{listState:c},{beforeUnshiftWith:u,gap:g,shiftWithOffset:I,sizes:x},{log:T},{recalcInProgress:B}])=>{const j=we(h(c,V(l),Be(([,f,d,b],[{bottom:H,items:z,offsetBottom:O,totalCount:i},m])=>{const S=H+O;let R=0;return d===i&&f.length>0&&z.length>0&&(z[0].originalIndex===0&&f[0].originalIndex===0||(R=S-b,R!==0&&(R+=m))),[R,z,i,S]},[0,[],0,0]),L(([f])=>f!==0),V(n,a,o,r,T,B),L(([,f,d,b,,,H])=>!H&&!b&&f!==0&&d===tt),y(([[f],,,,,d])=>(d("Upward scrolling compensation",{amount:f},Se.DEBUG),f))));function p(f){f>0?(D(t,{behavior:"auto",top:-f}),D(e,0)):(D(e,0),D(t,{behavior:"auto",top:-f}))}return K(h(j,V(e,s)),([f,d,b])=>{b&&$n()?D(e,d-f):p(-f)}),K(h(le(he(s,!1),e,B),L(([f,d,b])=>!f&&!b&&d!==0),y(([f,d])=>d),Ee(1)),p),E(h(I,y(f=>({top:-f}))),t),K(h(u,V(x,g),y(([f,{groupIndices:d,lastSize:b,sizeTree:H},z])=>{function O(i){return i*(b+z)}if(d.length===0)return O(f);{let i=0;const m=Ye(H,0);let S=0,R=0;for(;S<f;){S++,i+=m;let N=d.length===R+1?1/0:d[R+1]-d[R]-1;S+N>f&&(i-=m,N=f-S+1),S+=N,i+=O(N),R++}return i}})),f=>{D(e,f),requestAnimationFrame(()=>{D(t,{top:f}),requestAnimationFrame(()=>{D(e,0),D(B,!1)})})}),{deviation:e}},J(ge,it,De,He,Le,kt)),Kn=_(([e,t,o,n,r,s,l,a,c,u,g])=>({...e,...t,...o,...n,...r,...s,...l,...a,...c,...u,...g}),J(Ft,Dn,Fe,Po,No,Vn,Fn,Mt,Oo,Le,ko)),Fo=_(([{data:e,defaultItemSize:t,firstItemIndex:o,fixedItemSize:n,fixedGroupSize:r,gap:s,groupIndices:l,heightEstimates:a,itemSize:c,sizeRanges:u,sizes:g,statefulTotalCount:I,totalCount:x,trackItemSizes:T},{initialItemFinalLocationReached:B,initialTopMostItemIndex:j,scrolledToInitialItem:p},f,d,b,H,{scrollToIndex:z},O,{topItemCount:i},{groupCounts:m},S])=>{const{listState:R,minOverscanItemCount:N,topItemsIndexes:A,rangeChanged:M,...q}=H;return E(M,S.scrollSeekRangeChanged),E(h(S.windowViewportRect,y(G=>G.visibleHeight)),f.viewportHeight),{data:e,defaultItemHeight:t,firstItemIndex:o,fixedItemHeight:n,fixedGroupHeight:r,gap:s,groupCounts:m,heightEstimates:a,initialItemFinalLocationReached:B,initialTopMostItemIndex:j,scrolledToInitialItem:p,sizeRanges:u,topItemCount:i,topItemsIndexes:A,totalCount:x,...b,groupIndices:l,itemSize:c,listState:R,minOverscanItemCount:N,scrollToIndex:z,statefulTotalCount:I,trackItemSizes:T,rangeChanged:M,...q,...S,...f,sizes:g,...d}},J(He,lt,ge,Gn,An,De,st,qn,_n,jo,Kn));function Zn(e,t){const o={},n={};let r=0;const s=e.length;for(;r<s;)n[e[r]]=1,r+=1;for(const l in t)Object.hasOwn(n,l)||(o[l]=t[l]);return o}const ct=typeof document<"u"?F.useLayoutEffect:F.useEffect;function Xn(e,t,o){const n=Object.keys(t.required||{}),r=Object.keys(t.optional||{}),s=Object.keys(t.methods||{}),l=Object.keys(t.events||{}),a=F.createContext({});function c(p,f){p.propsReady&&D(p.propsReady,!1);for(const d of n){const b=p[t.required[d]];D(b,f[d])}for(const d of r)if(d in f){const b=p[t.optional[d]];D(b,f[d])}p.propsReady&&D(p.propsReady,!0)}function u(p){return s.reduce((f,d)=>(f[d]=b=>{const H=p[t.methods[d]];D(H,b)},f),{})}function g(p){return l.reduce((f,d)=>(f[d]=fn(p[t.events[d]]),f),{})}const I=F.forwardRef((p,f)=>{const{children:d,...b}=p,[H]=F.useState(()=>pt(mn(e),i=>{c(i,b)})),[z]=F.useState(Xt(g,H));ct(()=>{for(const i of l)i in b&&K(z[i],b[i]);return()=>{Object.values(z).map(Nt)}},[b,z,H]),ct(()=>{c(H,b)}),F.useImperativeHandle(f,Zt(u(H)));const O=o;return w.jsx(a.Provider,{value:H,children:o?w.jsx(O,{...Zn([...n,...r,...l],b),children:d}):d})}),x=p=>{const f=F.useContext(a);return F.useCallback(d=>{D(f[p],d)},[f,p])},T=p=>{const f=F.useContext(a)[p],d=F.useCallback(b=>K(f,b),[f]);return F.useSyncExternalStore(d,()=>oe(f),()=>oe(f))},B=p=>{const f=F.useContext(a)[p],[d,b]=F.useState(Xt(oe,f));return ct(()=>K(f,H=>{H!==d&&b(Zt(H))}),[f,d]),d},j=F.version.startsWith("18")?T:B;return{Component:I,useEmitter:(p,f)=>{const d=F.useContext(a)[p];ct(()=>K(d,f),[f,d])},useEmitterValue:j,usePublisher:x}}F.createContext(void 0);const Mo=F.createContext(void 0),Wo=typeof document<"u"?F.useLayoutEffect:F.useEffect;function bt(e){return"self"in e}function Yn(e){return"body"in e}function Ao(e,t,o,n=rt,r,s){const l=F.useRef(null),a=F.useRef(null),c=F.useRef(null),u=F.useCallback(x=>{let T,B,j;const p=x.target;if(Yn(p)||bt(p)){const d=bt(p)?p:p.defaultView;j=s?d.scrollX:d.scrollY,T=s?d.document.documentElement.scrollWidth:d.document.documentElement.scrollHeight,B=s?d.innerWidth:d.innerHeight}else j=s?p.scrollLeft:p.scrollTop,T=s?p.scrollWidth:p.scrollHeight,B=s?p.offsetWidth:p.offsetHeight;const f=()=>{e({scrollHeight:T,scrollTop:Math.max(j,0),viewportHeight:B})};x.suppressFlushSync?f():$o.flushSync(f),a.current!==null&&(j===a.current||j<=0||j===T-B)&&(a.current=null,t(!0),c.current&&(clearTimeout(c.current),c.current=null))},[e,t,s]);F.useEffect(()=>{const x=r||l.current;return n(r||l.current),u({suppressFlushSync:!0,target:x}),x.addEventListener("scroll",u,{passive:!0}),()=>{n(null),x.removeEventListener("scroll",u)}},[l,u,o,n,r]);function g(x){const T=l.current;if(!T||(s?"offsetWidth"in T&&T.offsetWidth===0:"offsetHeight"in T&&T.offsetHeight===0))return;const B=x.behavior==="smooth";let j,p,f;bt(T)?(p=Math.max(Je(T.document.documentElement,s?"width":"height"),s?T.document.documentElement.scrollWidth:T.document.documentElement.scrollHeight),j=s?T.innerWidth:T.innerHeight,f=s?window.scrollX:window.scrollY):(p=T[s?"scrollWidth":"scrollHeight"],j=Je(T,s?"width":"height"),f=T[s?"scrollLeft":"scrollTop"]);const d=p-j;if(x.top=Math.ceil(Math.max(Math.min(d,x.top),0)),Ho(j,p)||x.top===f){e({scrollHeight:p,scrollTop:f,viewportHeight:j}),B&&t(!0);return}B?(a.current=x.top,c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{c.current=null,a.current=null,t(!0)},1e3)):a.current=null,s&&(x={behavior:x.behavior,left:x.top}),T.scrollTo(x)}function I(x){s&&(x={behavior:x.behavior,left:x.top}),l.current.scrollBy(x)}return{scrollByCallback:I,scrollerRef:l,scrollToCallback:g}}const St="-webkit-sticky",lo="sticky",Wt=Lo(()=>{if(typeof document>"u")return lo;const e=document.createElement("div");return e.style.position=St,e.style.position===St?St:lo});function At(e){return e}const Qn=_(()=>{const e=v(a=>`Item ${a}`),t=v(a=>`Group ${a}`),o=v({}),n=v(At),r=v("div"),s=v(rt),l=(a,c=null)=>he(h(o,y(u=>u[a]),Q()),c);return{components:o,computeItemKey:n,EmptyPlaceholder:l("EmptyPlaceholder"),FooterComponent:l("Footer"),GroupComponent:l("Group","div"),groupContent:t,HeaderComponent:l("Header"),HeaderFooterTag:r,ItemComponent:l("Item","div"),itemContent:e,ListComponent:l("List","div"),ScrollerComponent:l("Scroller","div"),scrollerRef:s,ScrollSeekPlaceholder:l("ScrollSeekPlaceholder"),TopItemListComponent:l("TopItemList")}});J(Fo,Qn);Wt();const Jn={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},er={outline:"none",overflowX:"auto",position:"relative"},Do=e=>({height:"100%",position:"absolute",top:0,width:"100%"});Wt();function Oe(e,t){if(typeof e!="string")return{context:t}}function tr({useEmitter:e,useEmitterValue:t,usePublisher:o}){return F.memo(function({children:n,style:r,context:s,...l}){const a=o("scrollContainerState"),c=t("ScrollerComponent"),u=o("smoothScrollTargetReached"),g=t("scrollerRef"),I=t("horizontalDirection")||!1,{scrollByCallback:x,scrollerRef:T,scrollToCallback:B}=Ao(a,u,c,g,void 0,I);return e("scrollTo",B),e("scrollBy",x),w.jsx(c,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:T,style:{...I?er:Jn,...r},tabIndex:0,...l,...Oe(c,s),children:n})})}function or({useEmitter:e,useEmitterValue:t,usePublisher:o}){return F.memo(function({children:n,style:r,context:s,...l}){const a=o("windowScrollContainerState"),c=t("ScrollerComponent"),u=o("smoothScrollTargetReached"),g=t("totalListHeight"),I=t("deviation"),x=t("customScrollParent"),T=F.useRef(null),B=t("scrollerRef"),{scrollByCallback:j,scrollerRef:p,scrollToCallback:f}=Ao(a,u,c,B,x);return Wo(()=>{var d;return p.current=x||((d=T.current)==null?void 0:d.ownerDocument.defaultView),()=>{p.current=null}},[p,x]),e("windowScrollTo",f),e("scrollBy",j),w.jsx(c,{ref:T,"data-virtuoso-scroller":!0,style:{position:"relative",...r,...g!==0?{height:g+I}:{}},...l,...Oe(c,s),children:n})})}const nr=_(()=>{const e=v(u=>w.jsxs("td",{children:["Item $",u]})),t=v(null),o=v(u=>w.jsxs("td",{colSpan:1e3,children:["Group ",u]})),n=v(null),r=v(null),s=v({}),l=v(At),a=v(rt),c=(u,g=null)=>he(h(s,y(I=>I[u]),Q()),g);return{components:s,computeItemKey:l,context:t,EmptyPlaceholder:c("EmptyPlaceholder"),FillerRow:c("FillerRow"),fixedFooterContent:r,fixedHeaderContent:n,itemContent:e,groupContent:o,ScrollerComponent:c("Scroller","div"),scrollerRef:a,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder"),TableBodyComponent:c("TableBody","tbody"),TableComponent:c("Table","table"),TableFooterComponent:c("TableFoot","tfoot"),TableHeadComponent:c("TableHead","thead"),TableRowComponent:c("TableRow","tr"),GroupComponent:c("Group","tr")}});J(Fo,nr);Wt();const io={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},rr={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:ao,floor:mt,max:Ze,min:Ct,round:co}=Math;function uo(e,t,o){return Array.from({length:t-e+1}).map((n,r)=>({data:o===null?null:o[r+e],index:r+e}))}function sr(e){return{...rr,items:e}}function ut(e,t){return e&&e.width===t.width&&e.height===t.height}function lr(e,t){return e&&e.column===t.column&&e.row===t.row}const ir=_(([{increaseViewportBy:e,listBoundary:t,overscan:o,visibleRange:n},{footerHeight:r,headerHeight:s,scrollBy:l,scrollContainerState:a,scrollTo:c,scrollTop:u,smoothScrollTargetReached:g,viewportHeight:I},x,T,{didMount:B,propsReady:j},{customScrollParent:p,useWindowScroll:f,windowScrollContainerState:d,windowScrollTo:b,windowViewportRect:H},z])=>{const O=v(0),i=v(0),m=v(io),S=v({height:0,width:0}),R=v({height:0,width:0}),N=U(),A=U(),M=v(0),q=v(null),G=v({column:0,row:0}),k=U(),W=U(),re=v(!1),ie=v(0),me=v(!0),pe=v(!1),ze=v(!1);K(h(B,V(ie),L(([C,$])=>!!$)),()=>{D(me,!1)}),K(h(le(B,me,R,S,ie,pe),L(([C,$,ee,de,,Te])=>C&&!$&&ee.height!==0&&de.height!==0&&!Te)),([,,,,C])=>{D(pe,!0),Pt(1,()=>{D(N,C)}),ye(h(u),()=>{D(t,[0,0]),D(me,!0)})}),E(h(W,L(C=>C!=null&&C.scrollTop>0),je(0)),i),K(h(B,V(W),L(([,C])=>C!=null)),([,C])=>{C&&(D(S,C.viewport),D(R,C.item),D(G,C.gap),C.scrollTop>0&&(D(re,!0),ye(h(u,Ae(1)),$=>{D(re,!1)}),D(c,{top:C.scrollTop})))}),E(h(S,y(({height:C})=>C)),I),E(h(le(P(S,ut),P(R,ut),P(G,(C,$)=>C&&C.column===$.column&&C.row===$.row),P(u)),y(([C,$,ee,de])=>({gap:ee,item:$,scrollTop:de,viewport:C}))),k),E(h(le(P(O),n,P(G,lr),P(R,ut),P(S,ut),P(q),P(i),P(re),P(me),P(ie)),L(([,,,,,,,C])=>!C),y(([C,[$,ee],de,Te,ae,ne,ue,,se,Z])=>{const{column:Y,row:Ie}=de,{height:fe,width:wt}=Te,{width:Dt}=ae;if(ue===0&&(C===0||Dt===0))return io;if(wt===0){const $t=Lt(Z,C),_o=$t+Math.max(ue-1,0);return sr(uo($t,_o,ne))}const at=Vo(Dt,wt,Y);let Ge,Me;se?$===0&&ee===0&&ue>0?(Ge=0,Me=ue-1):(Ge=at*mt(($+Ie)/(fe+Ie)),Me=at*ao((ee+Ie)/(fe+Ie))-1,Me=Ct(C-1,Ze(Me,at-1)),Ge=Ct(Me,Ze(0,Ge))):(Ge=0,Me=-1);const Vt=uo(Ge,Me,ne),{bottom:Gt,top:Ut}=fo(ae,de,Te,Vt),_t=ao(C/at),Uo=_t*fe+(_t-1)*Ie-Gt;return{bottom:Gt,itemHeight:fe,items:Vt,itemWidth:wt,offsetBottom:Uo,offsetTop:Ut,top:Ut}})),m),E(h(q,L(C=>C!==null),y(C=>C.length)),O),E(h(le(S,R,m,G),L(([C,$,{items:ee}])=>ee.length>0&&$.height!==0&&C.height!==0),y(([C,$,{items:ee},de])=>{const{bottom:Te,top:ae}=fo(C,de,$,ee);return[ae,Te]}),Q(Qe)),t);const Ce=v(!1);E(h(u,V(Ce),y(([C,$])=>$||C!==0)),Ce);const Ne=we(h(le(m,O),L(([{items:C}])=>C.length>0),V(Ce),L(([[C,$],ee])=>{const de=C.items[C.items.length-1].index===$-1;return(ee||C.bottom>0&&C.itemHeight>0&&C.offsetBottom===0&&C.items.length===$)&&de}),y(([[,C]])=>C-1),Q())),qe=we(h(P(m),L(({items:C})=>C.length>0&&C[0].index===0),je(0),Q())),Ve=we(h(P(m),V(re),L(([{items:C},$])=>C.length>0&&!$),y(([{items:C}])=>({endIndex:C[C.length-1].index,startIndex:C[0].index})),Q(Co),Ee(0)));E(Ve,T.scrollSeekRangeChanged),E(h(N,V(S,R,O,G),y(([C,$,ee,de,Te])=>{const ae=Bo(C),{align:ne,behavior:ue,offset:se}=ae;let Z=ae.index;Z==="LAST"&&(Z=de-1),Z=Ze(0,Z,Ct(de-1,Z));let Y=Ht($,Te,ee,Z);return ne==="end"?Y=co(Y-$.height+ee.height):ne==="center"&&(Y=co(Y-$.height/2+ee.height/2)),se&&(Y+=se),{behavior:ue,top:Y}})),c);const ke=he(h(m,y(C=>C.offsetBottom+C.bottom)),0);return E(h(H,y(C=>({height:C.visibleHeight,width:C.visibleWidth}))),S),{customScrollParent:p,data:q,deviation:M,footerHeight:r,gap:G,headerHeight:s,increaseViewportBy:e,initialItemCount:i,itemDimensions:R,overscan:o,restoreStateFrom:W,scrollBy:l,scrollContainerState:a,scrollHeight:A,scrollTo:c,scrollToIndex:N,scrollTop:u,smoothScrollTargetReached:g,totalCount:O,useWindowScroll:f,viewportDimensions:S,windowScrollContainerState:d,windowScrollTo:b,windowViewportRect:H,...T,gridState:m,horizontalDirection:ze,initialTopMostItemIndex:ie,totalListHeight:ke,...x,endReached:Ne,propsReady:j,rangeChanged:Ve,startReached:qe,stateChanged:k,stateRestoreInProgress:re,...z}},J(Ft,ge,it,Po,Fe,Mt,Le));function Vo(e,t,o){return Ze(1,mt((e+o)/(mt(t)+o)))}function fo(e,t,o,n){const{height:r}=o;if(r===void 0||n.length===0)return{bottom:0,top:0};const s=Ht(e,t,o,n[0].index);return{bottom:Ht(e,t,o,n[n.length-1].index)+r,top:s}}function Ht(e,t,o,n){const r=Vo(e.width,o.width,t.column),s=mt(n/r),l=s*o.height+Ze(0,s-1)*t.row;return l>0?l+t.row:l}const ar=_(()=>{const e=v(I=>`Item ${I}`),t=v({}),o=v(null),n=v("virtuoso-grid-item"),r=v("virtuoso-grid-list"),s=v(At),l=v("div"),a=v(rt),c=(I,x=null)=>he(h(t,y(T=>T[I]),Q()),x),u=v(!1),g=v(!1);return E(P(g),u),{components:t,computeItemKey:s,context:o,FooterComponent:c("Footer"),HeaderComponent:c("Header"),headerFooterTag:l,itemClassName:n,ItemComponent:c("Item","div"),itemContent:e,listClassName:r,ListComponent:c("List","div"),readyStateChanged:u,reportReadyState:g,ScrollerComponent:c("Scroller","div"),scrollerRef:a,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder","div")}}),cr=_(([e,t])=>({...e,...t}),J(ir,ar)),ur=F.memo(function(){const e=te("gridState"),t=te("listClassName"),o=te("itemClassName"),n=te("itemContent"),r=te("computeItemKey"),s=te("isSeeking"),l=be("scrollHeight"),a=te("ItemComponent"),c=te("ListComponent"),u=te("ScrollSeekPlaceholder"),g=te("context"),I=be("itemDimensions"),x=be("gap"),T=te("log"),B=te("stateRestoreInProgress"),j=be("reportReadyState"),p=xt(F.useMemo(()=>f=>{const d=f.parentElement.parentElement.scrollHeight;l(d);const b=f.firstChild;if(b){const{height:H,width:z}=b.getBoundingClientRect();I({height:H,width:z})}x({column:ho("column-gap",getComputedStyle(f).columnGap,T),row:ho("row-gap",getComputedStyle(f).rowGap,T)})},[l,I,x,T]),!0,!1);return Wo(()=>{e.itemHeight>0&&e.itemWidth>0&&j(!0)},[e]),B?null:w.jsx(c,{className:t,ref:p,...Oe(c,g),"data-testid":"virtuoso-item-list",style:{paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},children:e.items.map(f=>{const d=r(f.index,f.data,g);return s?w.jsx(u,{...Oe(u,g),height:e.itemHeight,index:f.index,width:e.itemWidth},d):xe.createElement(a,{...Oe(a,g),className:o,"data-index":f.index,key:d},n(f.index,f.data,g))})})}),dr=F.memo(function(){const e=te("HeaderComponent"),t=be("headerHeight"),o=te("headerFooterTag"),n=xt(F.useMemo(()=>s=>{t(Je(s,"height"))},[t]),!0,!1),r=te("context");return e?w.jsx(o,{ref:n,children:w.jsx(e,{...Oe(e,r)})}):null}),fr=F.memo(function(){const e=te("FooterComponent"),t=be("footerHeight"),o=te("headerFooterTag"),n=xt(F.useMemo(()=>s=>{t(Je(s,"height"))},[t]),!0,!1),r=te("context");return e?w.jsx(o,{ref:n,children:w.jsx(e,{...Oe(e,r)})}):null}),hr=({children:e})=>{const t=F.useContext(Mo),o=be("itemDimensions"),n=be("viewportDimensions"),r=xt(F.useMemo(()=>s=>{n(s.getBoundingClientRect())},[n]),!0,!1);return F.useEffect(()=>{t&&(n({height:t.viewportHeight,width:t.viewportWidth}),o({height:t.itemHeight,width:t.itemWidth}))},[t,n,o]),w.jsx("div",{ref:r,style:Do(),children:e})},mr=({children:e})=>{const t=F.useContext(Mo),o=be("windowViewportRect"),n=be("itemDimensions"),r=te("customScrollParent"),s=xn(o,r,!1);return F.useEffect(()=>{t&&(n({height:t.itemHeight,width:t.itemWidth}),o({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))},[t,o,n]),w.jsx("div",{ref:s,style:Do(),children:e})},gr=F.memo(function({...e}){const t=te("useWindowScroll"),o=te("customScrollParent"),n=o||t?vr:xr,r=o||t?mr:hr,s=te("context");return w.jsx(n,{...e,...Oe(n,s),children:w.jsxs(r,{children:[w.jsx(dr,{}),w.jsx(ur,{}),w.jsx(fr,{})]})})}),{Component:pr,useEmitter:Go,useEmitterValue:te,usePublisher:be}=Xn(cr,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},gr),xr=tr({useEmitter:Go,useEmitterValue:te,usePublisher:be}),vr=or({useEmitter:Go,useEmitterValue:te,usePublisher:be});function ho(e,t,o){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&o(`${e} was not resolved to pixel value correctly`,t,Se.WARN),t==="normal"?0:parseInt(t??"0",10)}const wr=pr,Tr=e=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e||0),Ir=({product:e})=>{const t=mo(),{addToCart:o}=Xo(),[n,r]=xe.useState(!1),s=l=>{l.stopPropagation(),o(e,1),r(!0),setTimeout(()=>r(!1),2e3)};return w.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 border border-gray-100 overflow-hidden group flex flex-col h-full cursor-pointer",onClick:()=>t(`/product-detail/${e.id}`),children:[w.jsxs("div",{className:"relative aspect-square bg-gray-50 overflow-hidden",children:[e.imageUrl?w.jsx("img",{src:e.thumbnailUrl||e.imageUrl,alt:e.name,className:"w-full h-full object-contain p-4 transition-transform duration-500 group-hover:scale-105",loading:"lazy"}):w.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-300",children:[w.jsx(on,{className:"w-12 h-12 mb-2"}),w.jsx("span",{className:"text-xs",children:"Sin imagen"})]}),w.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[e.oferta&&w.jsx("span",{className:"bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded-full shadow-sm",children:"OFERTA"}),e.recentlyChanged&&w.jsx("span",{className:"bg-yellow-400 text-yellow-900 text-[10px] font-bold px-2 py-1 rounded-full shadow-sm",children:"NUEVO PRECIO"})]})]}),w.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[w.jsx("div",{className:"mb-1",children:w.jsx("span",{className:"text-xs font-semibold text-blue-600 uppercase tracking-wide",children:e.brand})}),w.jsx("h3",{className:"text-sm font-medium text-gray-800 line-clamp-2 mb-2 flex-grow",title:e.name,children:e.name}),w.jsx("div",{className:"mt-auto pt-2 border-t border-gray-50",children:w.jsxs("div",{className:"flex items-end justify-between gap-2",children:[w.jsxs("div",{className:"flex flex-col",children:[w.jsx("span",{className:"text-xs text-gray-400 font-mono",children:e.code}),w.jsx("span",{className:"text-lg font-bold text-gray-900",children:Tr(e.price)})]}),w.jsx("button",{onClick:s,className:`p-2 rounded-full transition-colors shadow-sm ${n?"bg-green-100 text-green-600":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,title:"Agregar al carrito",children:n?w.jsx(go,{className:"w-5 h-5"}):w.jsx(nn,{className:"w-5 h-5"})})]})})]})]})};function Rr(){const{user:e}=qo(),t=mo(),[o,n]=Ko(),[r,s]=xe.useState(""),[l,a]=xe.useState([]),[c,u]=xe.useState(!1),[g,I]=xe.useState(""),[x,T]=xe.useState(!1),B=xe.useRef(null),j=xe.useRef(null),p=xe.useRef(null);xe.useEffect(()=>{const k=o.get("brand");if(k){const W=decodeURIComponent(k).split(",");a(W)}},[o]),xe.useEffect(()=>(j.current&&clearTimeout(j.current),j.current=setTimeout(()=>I(r),500),()=>clearTimeout(j.current)),[r]),xe.useEffect(()=>{const k=W=>{B.current&&!B.current.contains(W.target)&&u(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const{data:f,fetchNextPage:d,hasNextPage:b,isFetchingNextPage:H,isLoading:z,isError:O,error:i}=rn({queryKey:["products-grid",g,l,e?.id],queryFn:({pageParam:k=1})=>qt.fetchProducts(k,g,l,!1,20,""),getNextPageParam:(k,W)=>W.reduce((ie,me)=>ie+me.products.length,0)<k.totalProducts?W.length+1:void 0,initialPageParam:1,staleTime:1e3*60*5,enabled:!!e}),{data:m,isLoading:S}=Zo({queryKey:["brands",e?.id],queryFn:()=>qt.fetchProtheusBrands(),staleTime:1e3*60*60,enabled:!!e}),R=k=>s(k.target.value),N=k=>{const W=l.includes(k)?l.filter(ie=>ie!==k):[...l,k];a(W);const re=new URLSearchParams(o);W.length>0?re.set("brand",encodeURIComponent(W.join(","))):re.delete("brand"),n(re)},A=()=>{s(""),a([]),n({})},M=f?.pages.flatMap(k=>k.products)||[],q=r.length>0||l.length>0,G=()=>S?"Cargando marcas...":l.length===0?"Todas las marcas":l.length===1?l[0]:`${l.length} marcas seleccionadas`;return w.jsx("div",{className:"min-h-screen bg-gray-50/50",children:w.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6",children:[w.jsxs("div",{className:"flex flex-col gap-6 mb-8",children:[w.jsx("div",{className:"flex items-center justify-between",children:w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 bg-white text-gray-600 rounded-full shadow-sm hover:bg-gray-50 hover:shadow transition-all",children:w.jsx(Yo,{className:"w-5 h-5"})}),w.jsxs("div",{children:[w.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Nuestros Productos"}),w.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Explora nuestro catlogo completo"})]})]})}),w.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.jsxs("div",{className:"relative",children:[w.jsx(Kt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),w.jsx("input",{type:"text",value:r,onChange:R,placeholder:"Buscar por nombre, cdigo...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border-transparent focus:bg-white border focus:border-espint-blue rounded-xl transition-all outline-none"})]}),w.jsxs("div",{className:"relative",ref:B,children:[w.jsxs("button",{onClick:()=>u(!c),className:"w-full flex items-center justify-between px-4 py-2.5 bg-gray-50 border border-transparent hover:bg-gray-100 rounded-xl transition-all outline-none",children:[w.jsx("span",{className:`truncate ${l.length>0?"text-espint-blue font-medium":"text-gray-600"}`,children:G()}),w.jsx(Qo,{className:`w-5 h-5 text-gray-400 transition-transform ${c?"rotate-180":""}`})]}),c&&w.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border border-gray-100 max-h-80 overflow-y-auto z-20 p-2",children:m?.map(k=>w.jsxs("label",{onClick:W=>{W.preventDefault(),N(k)},className:"flex items-center px-3 py-2 hover:bg-gray-50 rounded-lg cursor-pointer transition-colors",children:[w.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center mr-3 transition-colors ${l.includes(k)?"bg-espint-blue border-espint-blue":"border-gray-300"}`,children:l.includes(k)&&w.jsx(go,{className:"w-3.5 h-3.5 text-white"})}),w.jsx("span",{className:"text-sm text-gray-700",children:k})]},k))})]})]}),q&&w.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100 flex justify-end",children:w.jsxs("button",{onClick:A,className:"text-sm text-red-500 hover:text-red-600 font-medium flex items-center gap-1 px-3 py-1.5 hover:bg-red-50 rounded-lg transition-colors",children:[w.jsx(Jo,{className:"w-4 h-4"}),"Limpiar filtros"]})})]})]}),M.length>0&&w.jsx("div",{className:"w-full min-h-screen",children:w.jsx(wr,{ref:p,useWindowScroll:!0,data:M,endReached:()=>{b&&!H&&d()},overscan:200,itemContent:(k,W)=>w.jsx("div",{className:"p-2 h-full",children:w.jsx(Ir,{product:W})}),components:{List:F.forwardRef(({style:k,children:W,...re},ie)=>w.jsx("div",{ref:ie,...re,style:{...k},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2 mb-20 pb-20",children:W})),Footer:()=>w.jsx("div",{className:"py-8 flex justify-center w-full col-span-full",children:H?w.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[w.jsx(en,{className:"w-5 h-5 animate-spin"}),w.jsx("span",{children:"Cargando ms productos..."})]}):b?w.jsx("span",{className:"text-gray-400 text-sm",children:"Desliza para ver ms"}):w.jsx("span",{className:"text-gray-400 text-sm",children:"Has llegado al final del catlogo"})})}})}),!z&&M.length===0&&w.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[w.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:w.jsx(Kt,{className:"w-10 h-10 text-gray-400"})}),w.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No se encontraron productos"}),w.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:"Intenta ajustar los filtros de bsqueda o prueba con otros trminos."}),q&&w.jsx("button",{onClick:A,className:"mt-6 px-6 py-2 bg-espint-blue text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:"Limpiar filtros"})]}),O&&w.jsxs("div",{className:"text-center py-20",children:[w.jsx("p",{className:"text-red-500 font-medium mb-4",children:"Ocurri un error al cargar los productos"}),w.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reintentar"})]}),x&&w.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-8 right-8 p-3 bg-espint-blue text-white rounded-full shadow-lg hover:bg-blue-700 transition-all z-50 animate-bounce",children:w.jsx(tn,{className:"w-6 h-6"})})]})})}export{Rr as default};
