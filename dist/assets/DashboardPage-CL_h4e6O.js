import{j as e,u as b,b as y,a as v,L as _,c as f}from"./index-CNDH1LwZ.js";import{r as x,k as w,l as S,m as E,n as D,o as C,B as z,G as P,D as A,p as $,a as L}from"./ui-libs-xkhqbQ7p.js";import"./vendor-qkC6yhPU.js";const I=({title:a,subTitle:o,icon:n,tag:i,onClick:d,isLast:p,...c})=>{const r=`${a||""} ${o||""}`.toUpperCase();let s="group-hover:bg-gray-50",l="",m="text-espint-blue bg-gray-50 group-hover:bg-white/20 group-hover:text-white group-hover:scale-110",t="text-espint-blue group-hover:text-espint-blue",u="text-gray-400 group-hover:text-gray-600";r.includes("PEDIDOS")?(s="group-hover:bg-espint-magenta",t="text-espint-blue group-hover:text-white",u="text-gray-400 group-hover:text-white/90"):r.includes("PRECIO")?(s="group-hover:bg-[#FFC20E]",t="text-espint-blue group-hover:text-white",u="text-gray-400 group-hover:text-white/90"):r.includes("CUENTA")||r.includes("SALDO")?(s="group-hover:bg-espint-blue",t="text-espint-blue group-hover:text-white",u="text-gray-400 group-hover:text-white/90"):r.includes("CONSULTA")||r.includes("CLIENTE")?(s="group-hover:bg-espint-magenta",t="text-espint-blue group-hover:text-white",u="text-gray-400 group-hover:text-white/90"):r.includes("OFERTAS")?(s="group-hover:bg-espint-green",l="hover:scale-110 z-20",t="text-espint-blue group-hover:text-white",u="text-gray-400 group-hover:text-white/90"):r.includes("PEDIDO")&&(s="group-hover:bg-espint-green",t="text-espint-blue group-hover:text-white",u="text-gray-400 group-hover:text-white/90");let h=a;(r.includes("NUEVO PEDIDO")||r.includes("PEDIDO")&&!r.includes("HISTORICO"))&&(h="CREAR PEDIDO");const j=r.includes("OFERTAS");return e.jsxs(e.Fragment,{children:[j&&e.jsx("style",{children:`
          @keyframes border-rotate {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
          }
          .animate-border-custom {
            background-size: 200% 200%;
            animation: border-rotate 3s ease infinite;
          }
        `}),e.jsxs("div",{onClick:d,className:`
          group relative flex flex-col items-center justify-center p-6 h-48
          cursor-pointer transition-all duration-300 ease-out
          bg-transparent
          ${l}
          ${c.className||""}
        `,children:[j&&e.jsx("div",{className:"absolute -inset-[5px] rounded-[inherit] bg-[linear-gradient(90deg,#003366,#AACD46,#FFC20E,#EC008C,#003366)] animate-border-custom -z-20 blur-sm"}),e.jsx("div",{className:`absolute inset-0 rounded-[inherit] bg-white transition-colors duration-300 ${s} -z-10`}),i&&e.jsx("span",{className:"absolute top-3 right-3 px-2.5 py-1 text-[10px] font-bold text-white bg-espint-magenta rounded-full shadow-sm z-10 tracking-wide",children:i}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center w-full",children:[e.jsx("div",{className:`p-4 rounded-2xl mb-4 transition-colors duration-300 ${m}`,children:e.jsx(n,{className:"w-8 h-8 transition-transform duration-300"})}),e.jsx("h3",{className:`text-xs font-bold tracking-widest uppercase mb-2 text-center transition-colors duration-300 ${u}`,children:h}),e.jsx("p",{className:`text-sm md:text-base font-bold text-center leading-tight px-2 transition-colors duration-300 ${t}`,children:o})]})]})]})},g=({className:a,...o})=>e.jsx("div",{className:`animate-pulse bg-gray-200 rounded-md ${a}`,...o}),O=()=>e.jsxs("div",{className:"flex-none w-full md:w-44 bg-white rounded-lg overflow-hidden border-b-[3px] border-gray-200 group flex flex-col h-auto aspect-square md:aspect-auto md:h-auto",children:[e.jsx(g,{className:"w-full h-32 md:h-32"}),e.jsx("div",{className:"p-3 md:p-4 flex-grow flex items-center justify-center md:block bg-white",children:e.jsx(g,{className:"h-4 w-3/4 mx-auto md:mx-0"})})]}),k=({title:a})=>e.jsxs("div",{className:"relative py-4 mt-8",children:[a&&e.jsx("h2",{className:"text-2xl font-bold mb-4 text-espint-blue",children:a}),e.jsx("div",{className:"flex overflow-x-auto gap-4 pb-4",children:Array(6).fill(0).map((o,n)=>e.jsx(O,{},n))})]}),R=()=>{const[a,o]=x.useState([]),[n,i]=x.useState(!0),[d,p]=x.useState(null),c=b(),{user:r}=y(),s=x.useCallback(async()=>{try{i(!0);const t=await v.getAccessories(),u=r&&r.restricted_groups?t.filter(h=>!r.restricted_groups.includes(h.group_code)):t;o(u),i(!1)}catch(t){p("No se pudieron cargar los accesorios."),console.error(t),i(!1)}},[r]);x.useEffect(()=>{s()},[s]);const l=t=>{c(`/product-detail/${t}`)};if(n&&a.length===0)return e.jsx(k,{title:"Accesorios"});if(d)return e.jsx("div",{className:"p-4 text-red-500",children:d});if(a.length===0)return null;const m=a.slice(0,5);return e.jsxs("div",{className:"relative py-4 mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-espint-blue",children:"Accesorios"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:m.map(t=>e.jsxs("div",{className:"w-full bg-white rounded-lg overflow-hidden transition-all duration-200 ease-in-out cursor-pointer hover:-translate-y-1 shadow-sm hover:shadow-md border-b-[3px] border-espint-green group",onClick:()=>l(t.id),children:[e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-32 object-contain p-2",referrerPolicy:"no-referrer",loading:"lazy"}),e.jsx("div",{className:"p-3",children:e.jsx("h3",{className:"text-sm font-bold text-espint-blue whitespace-nowrap truncate",children:t.name})})]},t.id))}),n&&e.jsx("div",{className:"absolute top-0 left-0 right-0 bottom-0 bg-gray-900/70 flex justify-center items-center z-10 rounded-lg",children:e.jsx(_,{text:"Cargando..."})})]})},F=()=>{const[a,o]=x.useState([]),[n,i]=x.useState(!0),[d,p]=x.useState(null),c=b();x.useEffect(()=>{(async()=>{try{i(!0);const m=await v.getProductGroupsDetails();o(m),i(!1)}catch(m){p("No se pudieron cargar los grupos de productos."),console.error(m),i(!1)}})()},[]);const r=l=>{l.type==="custom_collection"?c(`/collection/${l.collection_id}`):c(`/category/${l.group_code}`)};if(n)return e.jsx(k,{title:"Categorías"});if(d)return e.jsx("div",{className:"p-4 text-red-500",children:d});if(a.length===0)return null;const s=a.filter(l=>!l.is_launch_group).slice(0,5);return e.jsxs("div",{className:"relative py-4 mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-espint-blue",children:"Categorías"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:s.map(l=>e.jsxs("div",{className:"w-full bg-white rounded-lg overflow-hidden cursor-pointer transition-all duration-200 ease-in-out hover:-translate-y-1 shadow-sm hover:shadow-md border-b-[3px] border-espint-green group flex flex-col h-auto aspect-square md:aspect-auto md:h-auto",onClick:()=>r(l),children:[l.imageUrl?e.jsx("img",{src:l.imageUrl,alt:l.name,className:"w-full h-40 md:h-48 object-cover",referrerPolicy:"no-referrer",loading:"lazy"}):e.jsx("div",{className:"w-full h-40 md:h-48 bg-[#183B64] flex items-center justify-center p-4",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-white opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("div",{className:"p-3 md:p-4 flex-grow flex items-center justify-center md:block bg-white",children:e.jsx("h3",{className:"text-sm md:text-base font-bold text-espint-blue text-center md:text-left md:whitespace-nowrap md:overflow-hidden md:text-ellipsis line-clamp-2 md:line-clamp-1",children:l.name})})]},l.id||l.group_code))})]})},T=()=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 h-32 flex flex-col justify-between border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-2 w-full",children:[e.jsx(g,{className:"h-4 w-24"}),e.jsx(g,{className:"h-3 w-16"})]}),e.jsx(g,{className:"h-8 w-8 rounded-full"})]}),e.jsx(g,{className:"h-5 w-12 rounded-full self-end"})]}),q=()=>e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-6",children:Array(10).fill(0).map((a,o)=>e.jsx(T,{},o))}),N=({products:a})=>{const o=b(),[n,i]=x.useState(0),[d,p]=x.useState(!1),{data:c=[],isLoading:r}=f({queryKey:["new-releases-banner"],queryFn:()=>v.fetchNewReleases(),staleTime:1e3*60*5,enabled:!a}),s=a||c;x.useEffect(()=>{if(s.length<=1||d)return;const u=setInterval(()=>{i(h=>(h+1)%s.length)},5e3);return()=>clearInterval(u)},[s.length,d]);const l=u=>{u.stopPropagation(),i(h=>(h+1)%s.length)},m=u=>{u.stopPropagation(),i(h=>(h-1+s.length)%s.length)};if(r)return e.jsx("div",{className:"w-full md:w-64 lg:w-72 h-[400px] md:h-auto md:flex-grow rounded-3xl bg-gray-100 animate-pulse flex items-center justify-center",children:e.jsx(w,{className:"w-8 h-8 text-gray-300"})});if(s.length===0)return e.jsxs("div",{onClick:()=>o("/new-releases"),className:`\r
                group cursor-pointer \r
                bg-gradient-to-b from-indigo-600 to-purple-700 \r
                text-white \r
                rounded-3xl p-6 \r
                shadow-lg hover:shadow-2xl \r
                transition-all duration-300 transform hover:scale-[1.02]\r
                flex flex-col items-center justify-center\r
                w-full md:w-64 lg:w-72\r
                h-[400px] md:h-auto md:flex-grow min-h-[500px]\r
                relative overflow-hidden\r
            `,children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-white opacity-5 rounded-3xl pointer-events-none"}),e.jsx("div",{className:"p-3 bg-white/20 rounded-full backdrop-blur-sm mb-4",children:e.jsx(w,{className:"w-8 h-8 text-yellow-300"})}),e.jsx("h3",{className:"text-xl font-bold text-center mb-2",children:"Nuevos Lanzamientos"}),e.jsx("p",{className:"text-white/80 text-center text-sm",children:"Descubre las novedades"})]});const t=s[n];return e.jsxs("div",{onClick:()=>{t.is_launch_group?o(`/collection/${t.id}`):o(`/product-detail/${t.id}`)},className:`\r
            group cursor-pointer \r
            bg-gradient-to-b from-indigo-600 to-purple-700 \r
            text-white \r
            rounded-3xl p-0 \r
            shadow-lg hover:shadow-2xl \r
            transition-all duration-300 transform hover:scale-[1.02]\r
            flex flex-col\r
            w-full md:w-64 lg:w-72\r
            h-[400px] md:h-auto md:flex-grow min-h-[500px]\r
            relative overflow-hidden\r
        `,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-white opacity-5 pointer-events-none"}),e.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-purple-400 rounded-full blur-3xl opacity-20 group-hover:opacity-40 transition-opacity"}),e.jsx("div",{className:"absolute top-4 right-4 z-20",children:e.jsxs("span",{className:`
                    ${t.is_launch_group?"bg-espint-blue text-white":"bg-yellow-400 text-yellow-900"}
                    text-xs font-bold px-3 py-1 rounded-full shadow-md flex items-center gap-1
                `,children:[e.jsx(w,{className:"w-3 h-3"}),t.is_launch_group?"COLECCIÓN":"NUEVO"]})}),e.jsx("div",{className:"w-full h-[65%] bg-white p-0 flex items-center justify-center relative",children:t.custom_image_url||t.imageUrl||t.image_url?e.jsx("img",{src:t.custom_image_url||t.imageUrl||t.image_url,alt:t.name,className:"w-full h-full object-cover drop-shadow-xl transition-transform duration-500 group-hover:scale-105",referrerPolicy:"no-referrer"}):e.jsxs("div",{className:"flex flex-col items-center text-gray-300",children:[e.jsx(S,{className:"w-16 h-16 mb-2"}),e.jsx("span",{className:"text-xs",children:"Sin imagen"})]})}),e.jsx("div",{className:"px-5 py-4 flex flex-col flex-grow relative z-10 h-[35%] justify-between",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-1",children:e.jsx("span",{className:"text-[10px] font-bold text-white/70 uppercase tracking-wider",children:t.is_launch_group?"Lanzamiento":t.brand})}),e.jsx("h3",{className:"text-lg font-bold leading-tight mb-1 line-clamp-2",title:t.custom_title||t.name,children:t.custom_title||t.name}),e.jsx("div",{className:"flex flex-col mt-2",children:t.is_launch_group?e.jsx("span",{className:"text-sm text-white/90 line-clamp-2",children:t.description||"Ver colección completa"}):e.jsx("span",{className:"text-2xl font-black text-white tracking-tight",children:t.formattedPrice})})]})}),s.length>1&&e.jsx("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center gap-2 z-20",children:s.map((u,h)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${h===n?"bg-white w-6":"bg-white/40"}`},h))}),s.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:m,className:`absolute left-2 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 p-2 rounded-full backdrop-blur-sm z-30 transition-all duration-300 ${d?"opacity-100":"opacity-0"}`,"aria-label":"Previous",children:e.jsx(E,{className:"w-5 h-5 text-white"})}),e.jsx("button",{onClick:l,className:`absolute right-2 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 p-2 rounded-full backdrop-blur-sm z-30 transition-all duration-300 ${d?"opacity-100":"opacity-0"}`,"aria-label":"Next",children:e.jsx(D,{className:"w-5 h-5 text-white"})})]})]})},G={ShoppingCart:L,Clock:$,DollarSign:A,Gift:P,Banknote:z,HelpCircle:C},U=()=>{const{user:a}=y(),o=b(),{data:n,isLoading:i,error:d}=f({queryKey:["dashboardPanels"],queryFn:()=>apiService.getDashboardPanels()}),{data:p=[]}=f({queryKey:["new-releases-banner"],queryFn:()=>apiService.fetchNewReleases(),staleTime:1e3*60*5});return i?e.jsx(q,{}):d?e.jsx("div",{className:"text-center p-8 text-red-500",children:"No se pudieron cargar los paneles del dashboard."}):e.jsx("div",{className:"flex flex-col md:flex-row w-full rounded-3xl shadow-xl bg-white relative z-0 mb-8",children:n.map((c,r)=>e.jsx(I,{title:c.title,subTitle:c.subtitle,icon:G[c.icon]||C,tag:c.tag,onClick:()=>o(`/${c.navigation_path.startsWith("/")?c.navigation_path.substring(1):c.navigation_path}`),className:"flex-1 border-b md:border-b-0 md:border-r border-gray-100 last:border-0 first:rounded-t-3xl md:first:rounded-tr-none md:first:rounded-l-3xl last:rounded-b-3xl md:last:rounded-bl-none md:last:rounded-r-3xl"},c.id))})},K=()=>{const{data:a=[]}=f({queryKey:["new-releases-banner"],queryFn:()=>apiService.fetchNewReleases(),staleTime:3e5}),{data:o=[]}=f({queryKey:["dashboard-launch-groups"],queryFn:async()=>(await apiService.getCarouselGroups()).filter(d=>d.is_launch_group),staleTime:1e3*60*5}),n=[...o,...a];return e.jsx("div",{className:"font-sans",children:e.jsxs("main",{className:"p-2 md:p-4 w-full",children:[e.jsx(U,{}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mt-8",children:[n.length>0&&e.jsxs("div",{className:"flex-shrink-0 hidden md:flex md:flex-col mt-8 py-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-espint-blue break-words w-64 lg:w-72 leading-tight",children:"Nuevos Lanzamientos"}),e.jsx(N,{products:n})]}),n.length>0&&e.jsx("div",{className:"block md:hidden mb-4",children:e.jsx(N,{products:n})}),e.jsxs("div",{className:"flex-grow w-full min-w-0 space-y-8",children:[e.jsx(F,{}),e.jsx(R,{})]})]})]})})};export{K as default};
