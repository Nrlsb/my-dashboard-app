import{r as m}from"./ui-libs-Bu6C6VT7.js";const b=(r,d=1)=>{const e=Number(r?.stock_disponible)||0,u=r?.indicator_description,c=u!=null&&(String(u).trim()==="0"||Number(u)===0),n=Number(r?.pack_quantity)>0?Number(r.pack_quantity):1,o=()=>c&&e<=0?n:Math.max(1,d),[s,i]=m.useState(o());return m.useEffect(()=>{i(o())},[r?.id,r?.stock_disponible,r?.indicator_description,r?.pack_quantity]),{quantity:s,setQuantity:i,increment:()=>{i(t=>!c||t<e?t+1:t+n)},decrement:()=>{i(t=>{if(!c)return Math.max(1,t-1);if(t>e){const a=t-n;if(e>0){if(a<e)return e}else if(a<n)return n;return Math.max(e>0?e:n,a)}return Math.max(1,t-1)})},handleInputChange:t=>{const a=parseInt(t.target.value,10);if(!isNaN(a)){if(c){const f=a-s;if(Math.abs(f)===1){if(f>0){if(s>=e){i(s+n);return}}else if(s>e){const l=s-n;e>0?i(Math.max(e,l)):i(Math.max(n,l));return}}}i(a)}},handleBlur:()=>{let t=s;if(t<1&&(t=1),!c){i(t);return}if(e<=0)t<n?t=n:t%n!==0&&(t=Math.ceil(t/n)*n);else if(t>e){const a=t-e,f=Math.ceil(a/n);t=e+f*n}i(t)},isRestricted:c,packQty:n,stock:e}};export{b as u};
