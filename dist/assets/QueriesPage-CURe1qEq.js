import{u as p,b as v,j as e,a as y}from"./index-BHb6OYEC.js";import{r as t,s as N,J as w}from"./ui-libs-CgXQafC0.js";import"./vendor-qkC6yhPU.js";const k=()=>{const[r,u]=t.useState(""),[o,m]=t.useState(""),[x,i]=t.useState(!1),[a,l]=t.useState(!1),[d,n]=t.useState(null),c=p(),{user:h}=v(),b=["Consulta sobre un pedido","Problema con un producto","Consulta administrativa/facturación","Soporte técnico","Otro"],g=async s=>{if(s.preventDefault(),!h){n("Error de autenticación. Por favor, inicie sesión de nuevo.");return}l(!0),n(null);try{await y.sendQuery({subject:r,message:o}),i(!0),setTimeout(()=>{i(!1),c("/dashboard")},3e3)}catch(j){n(j.message)}finally{l(!1)}},f=!r||o.trim()===""||a;return e.jsx("div",{className:"min-h-screen bg-gray-100 font-sans",children:e.jsxs("main",{className:"p-4 md:p-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:()=>c("/dashboard"),className:"flex items-center justify-center p-2 mr-4 text-gray-600 bg-white rounded-full shadow-md hover:bg-gray-100 transition-colors","aria-label":"Volver al dashboard",children:e.jsx(N,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Envío de Consultas"})]}),e.jsx("div",{className:"p-6 md:p-8 bg-white rounded-lg shadow-md",children:x?e.jsxs("div",{className:"text-center p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-green-600 mb-4",children:"¡Consulta Enviada!"}),e.jsx("p",{className:"text-gray-700",children:"Tu mensaje ha sido recibido. Nos pondremos en contacto contigo pronto."}),e.jsx("p",{className:"text-gray-500 mt-4 text-sm",children:"Serás redirigido al dashboard en 3 segundos..."})]}):e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"subject-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Asunto"}),e.jsxs("select",{id:"subject-select",value:r,onChange:s=>u(s.target.value),className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",disabled:a,children:[e.jsx("option",{value:"",children:"Selecciona un motivo..."}),b.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message-textarea",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mensaje"}),e.jsx("textarea",{id:"message-textarea",rows:"6",value:o,onChange:s=>m(s.target.value),className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",placeholder:"Escribe tu consulta aquí...",disabled:a})]}),d&&e.jsxs("div",{className:"text-sm text-red-600 text-right",children:["Error: ",d]}),e.jsx("div",{className:"mt-6 text-right",children:e.jsxs("button",{type:"submit",disabled:f,className:"inline-flex items-center px-6 py-2 font-semibold text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),a?"Enviando...":"Enviar Consulta"]})})]})})]})})};export{k as default};
