import{u as j,f as y,c as N,j as e,L as v,a as i}from"./index-C63YlVTl.js";import{r as d,s as C,u as G,Z as w,a8 as k,z as t}from"./ui-libs-xkhqbQ7p.js";import{u}from"./useMutation-Bdb9Md88.js";import"./vendor-qkC6yhPU.js";const q=()=>{const n=j(),l=y(),[m,a]=d.useState(!1),[r,c]=d.useState(""),{data:p,isLoading:x}=N({queryKey:["adminCarouselGroups"],queryFn:()=>i.get("/admin/carousel-groups")}),o=u({mutationFn:s=>i.post("/admin/carousel-groups",s),onSuccess:()=>{l.invalidateQueries(["adminCarouselGroups"]),a(!1),c(""),t.success("Grupo creado exitosamente")},onError:s=>{console.error(s),t.error("Error al crear el grupo")}}),g=u({mutationFn:s=>i.delete(`/admin/carousel-groups/${s}`),onSuccess:()=>{l.invalidateQueries(["adminCarouselGroups"]),t.success("Grupo eliminado exitosamente")},onError:s=>{console.error(s),t.error("Error al eliminar el grupo")}}),b=s=>{s.preventDefault(),r.trim()&&o.mutate({name:r,type:"custom_collection"})},h=s=>{window.confirm("¿Estás seguro de que quieres eliminar este grupo?")&&g.mutate(s)};if(x)return e.jsx(v,{});const f=p?.filter(s=>s.type==="custom_collection")||[];return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Grupos de Lanzamiento"}),e.jsx("p",{className:"text-gray-500",children:"Gestiona tus colecciones personalizadas de productos."})]}),e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 bg-espint-blue text-white px-4 py-2 rounded-lg hover:bg-espint-blue-dark transition-colors",children:[e.jsx(C,{size:20}),"Crear Nuevo Grupo"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(s=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-1",children:s.name}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>h(s.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"EliminarGrupo",children:e.jsx(G,{size:18})})})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>n(`/admin/launch-groups/${s.id}`),className:"flex-1 flex items-center justify-center gap-2 bg-gray-50 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors font-medium text-sm",children:[e.jsx(w,{size:16}),"Gestionar Productos"]}),e.jsx("button",{onClick:()=>n(`/collection/${s.id}`),className:"flex-none p-2 text-espint-blue hover:bg-blue-50 rounded-lg transition-colors",title:"Ver Pública",children:e.jsx(k,{size:20})})]})]},s.id))}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Crear Nuevo Grupo"}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Grupo"}),e.jsx("input",{type:"text",value:r,onChange:s=>c(s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-espint-blue focus:border-transparent outline-none",placeholder:"Ej. Ofertas Verano 2026",autoFocus:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:!r.trim()||o.isLoading,className:"px-4 py-2 bg-espint-blue text-white rounded-lg hover:bg-espint-blue-dark transition-colors disabled:opacity-50",children:o.isLoading?"Creando...":"Crear Grupo"})]})]})]})})]})};export{q as default};
