import{a as r,j as e,L as u}from"./index-DCEO0qBQ.js";import{r as l,c as p,X as j,a7 as y,v as N}from"./ui-libs-Cj6zJXYZ.js";const b={"/dashboard":"Inicio","/login":"Iniciar Sesión","/new-order":"Nuevo Pedido","/price-list":"Lista de Precios","/products":"Productos","/cart":"Carrito","/orders":"Mis Pedidos","/profile":"Mi Perfil","/admin/dashboard":"Panel Admin","/admin/users":"Gestión Usuarios","/admin/products":"Gestión Productos"},P=({isOpen:i,onClose:n,userId:a,userName:d,isRegularUser:o=!1,isSellerView:x=!1})=>{const[t,m]=l.useState(null),[g,c]=l.useState(!1);l.useEffect(()=>{i&&a&&h()},[i,a]);const h=async()=>{c(!0);try{let s;x?s=await r.getVendedorClientAnalytics(a):o?s=await r.getUserAnalytics(a):s=await r.getTestUserAnalytics(a),m(s.data)}catch(s){console.error("Error fetching stats:",s)}finally{c(!1)}};return i?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5 text-blue-600"}),"Análisis: ",d]}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:e.jsx(j,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6",children:g?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(u,{text:"Cargando datos..."})}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 mb-1",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Visitas Totales"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:t.totalVisits})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700 mb-1",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Última Visita"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:t.lastVisit?new Date(t.lastVisit).toLocaleDateString():"N/A"}),e.jsx("p",{className:"text-xs text-gray-500",children:t.lastVisit?new Date(t.lastVisit).toLocaleTimeString():""})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:"Páginas Más Vistas"}),t.topPages.length>0?e.jsx("ul",{className:"divide-y divide-gray-100",children:t.topPages.map((s,f)=>e.jsxs("li",{className:"py-2 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 truncate max-w-[250px]",title:s.path,children:b[s.path]||s.path}),e.jsxs("span",{className:"text-xs font-semibold bg-gray-100 text-gray-600 px-2 py-1 rounded",children:[s.count," visitas"]})]},f))}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No hay actividad registrada."})]})]}):e.jsx("p",{className:"text-center text-gray-500",children:"No se pudieron cargar los datos."})}),e.jsx("div",{className:"bg-gray-50 p-4 border-t border-gray-200 flex justify-end",children:e.jsx("button",{onClick:n,className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cerrar"})})]})}):null};export{P as T};
